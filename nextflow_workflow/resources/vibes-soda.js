var vs=(()=>{var yh=Object.create;var gr=Object.defineProperty,xh=Object.defineProperties,vh=Object.getOwnPropertyDescriptor,wh=Object.getOwnPropertyDescriptors,bh=Object.getOwnPropertyNames,Qa=Object.getOwnPropertySymbols,kh=Object.getPrototypeOf,ja=Object.prototype.hasOwnProperty,Mh=Object.prototype.propertyIsEnumerable;var Za=(t,e,r)=>e in t?gr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Wt=(t,e)=>{for(var r in e||(e={}))ja.call(e,r)&&Za(t,r,e[r]);if(Qa)for(var r of Qa(e))Mh.call(e,r)&&Za(t,r,e[r]);return t},yr=(t,e)=>xh(t,wh(e)),Ja=t=>gr(t,"__esModule",{value:!0});var _h=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Sh=(t,e)=>{for(var r in e)gr(t,r,{get:e[r],enumerable:!0})},ts=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of bh(e))!ja.call(t,i)&&(r||i!=="default")&&gr(t,i,{get:()=>e[i],enumerable:!(n=vh(e,i))||n.enumerable});return t},Ah=(t,e)=>ts(Ja(gr(t!=null?yh(kh(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),zh=(t=>(e,r)=>t&&t.get(e)||(r=ts(Ja({}),e,1),t&&t.set(e,r),r))(typeof WeakMap!="undefined"?new WeakMap:0);var nf=_h((pa,ma)=>{(function(t,e){typeof pa=="object"&&typeof ma<"u"?ma.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self,t.autocomplete=e())})(pa,function(){"use strict";function t(e){var r=document,n=e.container||r.createElement("div"),i=n.style,o=navigator.userAgent,a=~o.indexOf("Firefox")&&~o.indexOf("Mobile"),s=e.debounceWaitMs||0,l=e.preventSubmit||!1,u=e.disableAutoSelect||!1,f=a?"input":"keyup",c=[],h="",m=2,g=e.showOnFocus,p,y=0,b;if(e.minLength!==void 0&&(m=e.minLength),!e.input)throw new Error("input undefined");var w=e.input;n.className="autocomplete "+(e.className||""),i.position="absolute";function v(){var z=n.parentNode;z&&z.removeChild(n)}function S(){b&&window.clearTimeout(b)}function R(){n.parentNode||r.body.appendChild(n)}function E(){return!!n.parentNode}function q(){y++,c=[],h="",p=void 0,v()}function G(){if(!E())return;i.height="auto",i.width=w.offsetWidth+"px";var z=0,O;function I(){var U=r.documentElement,K=U.clientTop||r.body.clientTop||0,tt=U.clientLeft||r.body.clientLeft||0,Pt=window.pageYOffset||U.scrollTop,ht=window.pageXOffset||U.scrollLeft;O=w.getBoundingClientRect();var jt=O.top+w.offsetHeight+Pt-K,Ka=O.left+ht-tt;i.top=jt+"px",i.left=Ka+"px",z=window.innerHeight-(O.top+w.offsetHeight),z<0&&(z=0),i.top=jt+"px",i.bottom="",i.left=Ka+"px",i.maxHeight=z+"px"}I(),I(),e.customize&&O&&e.customize(w,O,n,z)}function H(){for(;n.firstChild;)n.removeChild(n.firstChild);var z=function(tt,Pt){var ht=r.createElement("div");return ht.textContent=tt.label||"",ht};e.render&&(z=e.render);var O=function(tt,Pt){var ht=r.createElement("div");return ht.textContent=tt,ht};e.renderGroup&&(O=e.renderGroup);var I=r.createDocumentFragment(),U="#9?$";if(c.forEach(function(tt){if(tt.group&&tt.group!==U){U=tt.group;var Pt=O(tt.group,h);Pt&&(Pt.className+=" group",I.appendChild(Pt))}var ht=z(tt,h);ht&&(ht.addEventListener("click",function(jt){e.onSelect(tt,w),q(),jt.preventDefault(),jt.stopPropagation()}),tt===p&&(ht.className+=" selected"),I.appendChild(ht))}),n.appendChild(I),c.length<1)if(e.emptyMsg){var K=r.createElement("div");K.className="empty",K.textContent=e.emptyMsg,n.appendChild(K)}else{q();return}R(),G(),M()}function P(){E()&&H()}function k(){P()}function d(z){z.target!==n?P():z.preventDefault()}function x(z){for(var O=z.which||z.keyCode||0,I=e.keysToIgnore||[38,13,27,39,37,16,17,18,20,91,9],U=0,K=I;U<K.length;U++){var tt=K[U];if(O===tt)return}O>=112&&O<=123&&!e.keysToIgnore||O===40&&E()||$(0)}function M(){var z=n.getElementsByClassName("selected");if(z.length>0){var O=z[0],I=O.previousElementSibling;if(I&&I.className.indexOf("group")!==-1&&!I.previousElementSibling&&(O=I),O.offsetTop<n.scrollTop)n.scrollTop=O.offsetTop;else{var U=O.offsetTop+O.offsetHeight,K=n.scrollTop+n.offsetHeight;U>K&&(n.scrollTop+=U-K)}}}function A(){if(c.length<1)p=void 0;else if(p===c[0])p=c[c.length-1];else for(var z=c.length-1;z>0;z--)if(p===c[z]||z===1){p=c[z-1];break}}function C(){if(c.length<1&&(p=void 0),!p||p===c[c.length-1]){p=c[0];return}for(var z=0;z<c.length-1;z++)if(p===c[z]){p=c[z+1];break}}function T(z){var O=z.which||z.keyCode||0;if(O===38||O===40||O===27){var I=E();if(O===27)q();else{if(!I||c.length<1)return;O===38?A():C(),H()}z.preventDefault(),I&&z.stopPropagation();return}O===13&&(p&&(e.onSelect(p,w),q()),l&&z.preventDefault())}function D(){g&&$(1)}function $(z){var O=++y,I=w.value,U=w.selectionStart||0;I.length>=m||z===1?(S(),b=window.setTimeout(function(){e.fetch(I,function(K){y===O&&K&&(c=K,h=I,p=c.length<1||u?void 0:c[0],H())},z,U)},z===0?s:0)):q()}function J(){setTimeout(function(){r.activeElement!==w&&q()},200)}n.addEventListener("mousedown",function(z){z.stopPropagation(),z.preventDefault()}),n.addEventListener("focus",function(){return w.focus()});function xt(){w.removeEventListener("focus",D),w.removeEventListener("keydown",T),w.removeEventListener(f,x),w.removeEventListener("blur",J),window.removeEventListener("resize",k),r.removeEventListener("scroll",d,!0),S(),q()}return w.addEventListener("keydown",T),w.addEventListener(f,x),w.addEventListener("blur",J),w.addEventListener("focus",D),window.addEventListener("resize",k),r.addEventListener("scroll",d,!0),{destroy:xt}}return t})});var Uy={};Sh(Uy,{run:()=>Ty});var Sn;(function(t){t.Forward="+",t.Reverse="-",t.Unknown="?",t.Unoriented="."})(Sn||(Sn={}));var es="soda-id",eo=new Map;eo.set(es,0);function F(t){t=t||es;let e=eo.get(t)||0,r=`${t}-${e}`;return e++,eo.set(t,e),r}function Tt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function An(t){return t.length===1&&(t=Ch(t)),{left:function(e,r,n,i){for(n==null&&(n=0),i==null&&(i=e.length);n<i;){var o=n+i>>>1;t(e[o],r)<0?n=o+1:i=o}return n},right:function(e,r,n,i){for(n==null&&(n=0),i==null&&(i=e.length);n<i;){var o=n+i>>>1;t(e[o],r)>0?i=o:n=o+1}return n}}}function Ch(t){return function(e,r){return Tt(t(e),r)}}var ns=An(Tt),is=ns.right,Rh=ns.left,Jt=is;var os=Array.prototype,Ph=os.slice,Eh=os.map;var ro=Math.sqrt(50),no=Math.sqrt(10),io=Math.sqrt(2);function Cn(t,e,r){var n,i=-1,o,a,s;if(e=+e,t=+t,r=+r,t===e&&r>0)return[t];if((n=e<t)&&(o=t,t=e,e=o),(s=He(t,e,r))===0||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),a=new Array(o=Math.ceil(e-t+1));++i<o;)a[i]=(t+i)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),a=new Array(o=Math.ceil(t-e+1));++i<o;)a[i]=(t-i)/s;return n&&a.reverse(),a}function He(t,e,r){var n=(e-t)/Math.max(0,r),i=Math.floor(Math.log(n)/Math.LN10),o=n/Math.pow(10,i);return i>=0?(o>=ro?10:o>=no?5:o>=io?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=ro?10:o>=no?5:o>=io?2:1)}function ce(t,e,r){var n=Math.abs(e-t)/Math.max(0,r),i=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),o=n/i;return o>=ro?i*=10:o>=no?i*=5:o>=io&&(i*=2),e<t?-i:i}var Rn=Array.prototype.slice;function ls(t){return t}var Nn=1,Pn=2,ao=3,vr=4,us=1e-6;function Lh(t){return"translate("+(t+.5)+",0)"}function Bh(t){return"translate(0,"+(t+.5)+")"}function qh(t){return function(e){return+t(e)}}function Hh(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(r){return+t(r)+e}}function Fh(){return!this.__axis}function En(t,e){var r=[],n=null,i=null,o=6,a=6,s=3,l=t===Nn||t===vr?-1:1,u=t===vr||t===Pn?"x":"y",f=t===Nn||t===ao?Lh:Bh;function c(h){var m=n??(e.ticks?e.ticks.apply(e,r):e.domain()),g=i??(e.tickFormat?e.tickFormat.apply(e,r):ls),p=Math.max(o,0)+s,y=e.range(),b=+y[0]+.5,w=+y[y.length-1]+.5,v=(e.bandwidth?Hh:qh)(e.copy()),S=h.selection?h.selection():h,R=S.selectAll(".domain").data([null]),E=S.selectAll(".tick").data(m,e).order(),q=E.exit(),G=E.enter().append("g").attr("class","tick"),H=E.select("line"),P=E.select("text");R=R.merge(R.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(G),H=H.merge(G.append("line").attr("stroke","currentColor").attr(u+"2",l*o)),P=P.merge(G.append("text").attr("fill","currentColor").attr(u,l*p).attr("dy",t===Nn?"0em":t===ao?"0.71em":"0.32em")),h!==S&&(R=R.transition(h),E=E.transition(h),H=H.transition(h),P=P.transition(h),q=q.transition(h).attr("opacity",us).attr("transform",function(k){return isFinite(k=v(k))?f(k):this.getAttribute("transform")}),G.attr("opacity",us).attr("transform",function(k){var d=this.parentNode.__axis;return f(d&&isFinite(d=d(k))?d:v(k))})),q.remove(),R.attr("d",t===vr||t==Pn?a?"M"+l*a+","+b+"H0.5V"+w+"H"+l*a:"M0.5,"+b+"V"+w:a?"M"+b+","+l*a+"V0.5H"+w+"V"+l*a:"M"+b+",0.5H"+w),E.attr("opacity",1).attr("transform",function(k){return f(v(k))}),H.attr(u+"2",l*o),P.attr(u,l*p).text(g),S.filter(Fh).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Pn?"start":t===vr?"end":"middle"),S.each(function(){this.__axis=v})}return c.scale=function(h){return arguments.length?(e=h,c):e},c.ticks=function(){return r=Rn.call(arguments),c},c.tickArguments=function(h){return arguments.length?(r=h==null?[]:Rn.call(h),c):r.slice()},c.tickValues=function(h){return arguments.length?(n=h==null?null:Rn.call(h),c):n&&n.slice()},c.tickFormat=function(h){return arguments.length?(i=h,c):i},c.tickSize=function(h){return arguments.length?(o=a=+h,c):o},c.tickSizeInner=function(h){return arguments.length?(o=+h,c):o},c.tickSizeOuter=function(h){return arguments.length?(a=+h,c):a},c.tickPadding=function(h){return arguments.length?(s=+h,c):s},c}function so(t){return En(Nn,t)}function lo(t){return En(Pn,t)}function uo(t){return En(ao,t)}function fo(t){return En(vr,t)}var $h={value:function(){}};function cs(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new On(r)}function On(t){this._=t}function Gh(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}On.prototype=cs.prototype={constructor:On,on:function(t,e){var r=this._,n=Gh(t+"",r),i,o=-1,a=n.length;if(arguments.length<2){for(;++o<a;)if((i=(t=n[o]).type)&&(i=Vh(r[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=n[o]).type)r[i]=fs(r[i],t.name,e);else if(e==null)for(i in r)r[i]=fs(r[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new On(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,o;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],n=0,i=o.length;n<i;++n)o[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],i=0,o=n.length;i<o;++i)n[i].value.apply(e,r)}};function Vh(t,e){for(var r=0,n=t.length,i;r<n;++r)if((i=t[r]).name===e)return i.value}function fs(t,e,r){for(var n=0,i=t.length;n<i;++n)if(t[n].name===e){t[n]=$h,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var wr=cs;var In="http://www.w3.org/1999/xhtml",co={svg:"http://www.w3.org/2000/svg",xhtml:In,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ut(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),co.hasOwnProperty(e)?{space:co[e],local:t}:t}function Xh(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===In&&e.documentElement.namespaceURI===In?e.createElement(t):e.createElementNS(r,t)}}function Wh(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Tn(t){var e=Ut(t);return(e.local?Wh:Xh)(e)}function Uh(){}function he(t){return t==null?Uh:function(){return this.querySelector(t)}}function hs(t){typeof t!="function"&&(t=he(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var o=e[i],a=o.length,s=n[i]=new Array(a),l,u,f=0;f<a;++f)(l=o[f])&&(u=t.call(l,l.__data__,f,o))&&("__data__"in l&&(u.__data__=l.__data__),s[f]=u);return new Q(n,this._parents)}function Yh(){return[]}function br(t){return t==null?Yh:function(){return this.querySelectorAll(t)}}function ps(t){typeof t!="function"&&(t=br(t));for(var e=this._groups,r=e.length,n=[],i=[],o=0;o<r;++o)for(var a=e[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(n.push(t.call(l,l.__data__,u,a)),i.push(l));return new Q(n,i)}function kr(t){return function(){return this.matches(t)}}function ms(t){typeof t!="function"&&(t=kr(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var o=e[i],a=o.length,s=n[i]=[],l,u=0;u<a;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&s.push(l);return new Q(n,this._parents)}function Dn(t){return new Array(t.length)}function ds(){return new Q(this._enter||this._groups.map(Dn),this._parents)}function Mr(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Mr.prototype={constructor:Mr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function gs(t){return function(){return t}}var ys="$";function Kh(t,e,r,n,i,o){for(var a=0,s,l=e.length,u=o.length;a<u;++a)(s=e[a])?(s.__data__=o[a],n[a]=s):r[a]=new Mr(t,o[a]);for(;a<l;++a)(s=e[a])&&(i[a]=s)}function Qh(t,e,r,n,i,o,a){var s,l,u={},f=e.length,c=o.length,h=new Array(f),m;for(s=0;s<f;++s)(l=e[s])&&(h[s]=m=ys+a.call(l,l.__data__,s,e),m in u?i[s]=l:u[m]=l);for(s=0;s<c;++s)m=ys+a.call(t,o[s],s,o),(l=u[m])?(n[s]=l,l.__data__=o[s],u[m]=null):r[s]=new Mr(t,o[s]);for(s=0;s<f;++s)(l=e[s])&&u[h[s]]===l&&(i[s]=l)}function xs(t,e){if(!t)return m=new Array(this.size()),u=-1,this.each(function(E){m[++u]=E}),m;var r=e?Qh:Kh,n=this._parents,i=this._groups;typeof t!="function"&&(t=gs(t));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var f=n[u],c=i[u],h=c.length,m=t.call(f,f&&f.__data__,u,n),g=m.length,p=s[u]=new Array(g),y=a[u]=new Array(g),b=l[u]=new Array(h);r(f,c,p,y,b,m,e);for(var w=0,v=0,S,R;w<g;++w)if(S=p[w]){for(w>=v&&(v=w+1);!(R=y[v])&&++v<g;);S._next=R||null}}return a=new Q(a,n),a._enter=s,a._exit=l,a}function vs(){return new Q(this._exit||this._groups.map(Dn),this._parents)}function ws(t,e,r){var n=this.enter(),i=this,o=this.exit();return n=typeof t=="function"?t(n):n.append(t+""),e!=null&&(i=e(i)),r==null?o.remove():r(o),n&&i?n.merge(i).order():i}function bs(t){for(var e=this._groups,r=t._groups,n=e.length,i=r.length,o=Math.min(n,i),a=new Array(n),s=0;s<o;++s)for(var l=e[s],u=r[s],f=l.length,c=a[s]=new Array(f),h,m=0;m<f;++m)(h=l[m]||u[m])&&(c[m]=h);for(;s<n;++s)a[s]=e[s];return new Q(a,this._parents)}function ks(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],i=n.length-1,o=n[i],a;--i>=0;)(a=n[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Ms(t){t||(t=Zh);function e(c,h){return c&&h?t(c.__data__,h.__data__):!c-!h}for(var r=this._groups,n=r.length,i=new Array(n),o=0;o<n;++o){for(var a=r[o],s=a.length,l=i[o]=new Array(s),u,f=0;f<s;++f)(u=a[f])&&(l[f]=u);l.sort(e)}return new Q(i,this._parents).order()}function Zh(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function _s(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ss(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function As(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],i=0,o=n.length;i<o;++i){var a=n[i];if(a)return a}return null}function zs(){var t=0;return this.each(function(){++t}),t}function Cs(){return!this.node()}function Rs(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var i=e[r],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function jh(t){return function(){this.removeAttribute(t)}}function Jh(t){return function(){this.removeAttributeNS(t.space,t.local)}}function tp(t,e){return function(){this.setAttribute(t,e)}}function ep(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function rp(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function np(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function Ns(t,e){var r=Ut(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?Jh:jh:typeof e=="function"?r.local?np:rp:r.local?ep:tp)(r,e))}function Ln(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ip(t){return function(){this.style.removeProperty(t)}}function op(t,e,r){return function(){this.style.setProperty(t,e,r)}}function ap(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function Ps(t,e,r){return arguments.length>1?this.each((e==null?ip:typeof e=="function"?ap:op)(t,e,r??"")):te(this.node(),t)}function te(t,e){return t.style.getPropertyValue(e)||Ln(t).getComputedStyle(t,null).getPropertyValue(e)}function sp(t){return function(){delete this[t]}}function lp(t,e){return function(){this[t]=e}}function up(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function Es(t,e){return arguments.length>1?this.each((e==null?sp:typeof e=="function"?up:lp)(t,e)):this.node()[t]}function Os(t){return t.trim().split(/^|\s+/)}function ho(t){return t.classList||new Is(t)}function Is(t){this._node=t,this._names=Os(t.getAttribute("class")||"")}Is.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ts(t,e){for(var r=ho(t),n=-1,i=e.length;++n<i;)r.add(e[n])}function Ds(t,e){for(var r=ho(t),n=-1,i=e.length;++n<i;)r.remove(e[n])}function fp(t){return function(){Ts(this,t)}}function cp(t){return function(){Ds(this,t)}}function hp(t,e){return function(){(e.apply(this,arguments)?Ts:Ds)(this,t)}}function Ls(t,e){var r=Os(t+"");if(arguments.length<2){for(var n=ho(this.node()),i=-1,o=r.length;++i<o;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof e=="function"?hp:e?fp:cp)(r,e))}function pp(){this.textContent=""}function mp(t){return function(){this.textContent=t}}function dp(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Bs(t){return arguments.length?this.each(t==null?pp:(typeof t=="function"?dp:mp)(t)):this.node().textContent}function gp(){this.innerHTML=""}function yp(t){return function(){this.innerHTML=t}}function xp(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function qs(t){return arguments.length?this.each(t==null?gp:(typeof t=="function"?xp:yp)(t)):this.node().innerHTML}function vp(){this.nextSibling&&this.parentNode.appendChild(this)}function Hs(){return this.each(vp)}function wp(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fs(){return this.each(wp)}function $s(t){var e=typeof t=="function"?t:Tn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function bp(){return null}function Gs(t,e){var r=typeof t=="function"?t:Tn(t),n=e==null?bp:typeof e=="function"?e:he(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function kp(){var t=this.parentNode;t&&t.removeChild(this)}function Vs(){return this.each(kp)}function Mp(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function _p(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Xs(t){return this.select(t?_p:Mp)}function Ws(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Ys={},N=null;typeof document<"u"&&(Us=document.documentElement,"onmouseenter"in Us||(Ys={mouseenter:"mouseover",mouseleave:"mouseout"}));var Us;function Sp(t,e,r){return t=Ks(t,e,r),function(n){var i=n.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,n)}}function Ks(t,e,r){return function(n){var i=N;N=n;try{t.call(this,this.__data__,e,r)}finally{N=i}}}function Ap(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function zp(t){return function(){var e=this.__on;if(!!e){for(var r=0,n=-1,i=e.length,o;r<i;++r)o=e[r],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.capture):e[++n]=o;++n?e.length=n:delete this.__on}}}function Cp(t,e,r){var n=Ys.hasOwnProperty(t.type)?Sp:Ks;return function(i,o,a){var s=this.__on,l,u=n(e,o,a);if(s){for(var f=0,c=s.length;f<c;++f)if((l=s[f]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=u,l.capture=r),l.value=e;return}}this.addEventListener(t.type,u,r),l={type:t.type,name:t.name,value:e,listener:u,capture:r},s?s.push(l):this.__on=[l]}}function Qs(t,e,r){var n=Ap(t+""),i,o=n.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,f;l<u;++l)for(i=0,f=s[l];i<o;++i)if((a=n[i]).type===f.type&&a.name===f.name)return f.value}return}for(s=e?Cp:zp,r==null&&(r=!1),i=0;i<o;++i)this.each(s(n[i],e,r));return this}function po(t,e,r,n){var i=N;t.sourceEvent=N,N=t;try{return e.apply(r,n)}finally{N=i}}function Zs(t,e,r){var n=Ln(t),i=n.CustomEvent;typeof i=="function"?i=new i(e,r):(i=n.document.createEvent("Event"),r?(i.initEvent(e,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Rp(t,e){return function(){return Zs(this,t,e)}}function Np(t,e){return function(){return Zs(this,t,e.apply(this,arguments))}}function js(t,e){return this.each((typeof e=="function"?Np:Rp)(t,e))}var mo=[null];function Q(t,e){this._groups=t,this._parents=e}function Js(){return new Q([[document.documentElement]],mo)}Q.prototype=Js.prototype={constructor:Q,select:hs,selectAll:ps,filter:ms,data:xs,enter:ds,exit:vs,join:ws,merge:bs,order:ks,sort:Ms,call:_s,nodes:Ss,node:As,size:zs,empty:Cs,each:Rs,attr:Ns,style:Ps,property:Es,classed:Ls,text:Bs,html:qs,raise:Hs,lower:Fs,append:$s,insert:Gs,remove:Vs,clone:Xs,datum:Ws,on:Qs,dispatch:js};var Yt=Js;function W(t){return typeof t=="string"?new Q([[document.querySelector(t)]],[document.documentElement]):new Q([[t]],mo)}function Bn(){for(var t=N,e;e=t.sourceEvent;)t=e;return t}function qn(t,e){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}function Fe(t){var e=Bn();return e.changedTouches&&(e=e.changedTouches[0]),qn(t,e)}function Hn(t,e,r){arguments.length<3&&(r=e,e=Bn().changedTouches);for(var n=0,i=e?e.length:0,o;n<i;++n)if((o=e[n]).identifier===r)return qn(t,o);return null}function Fn(){N.preventDefault(),N.stopImmediatePropagation()}function go(t){var e=t.document.documentElement,r=W(t).on("dragstart.drag",Fn,!0);"onselectstart"in e?r.on("selectstart.drag",Fn,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function yo(t,e){var r=t.document.documentElement,n=W(t).on("dragstart.drag",null);e&&(n.on("click.drag",Fn,!0),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}function $n(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function xo(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Ar(){}var _r=.7,Vn=1/_r,$e="\\s*([+-]?\\d+)\\s*",Sr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Lt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Pp=/^#([0-9a-f]{3,8})$/,Ep=new RegExp("^rgb\\("+[$e,$e,$e]+"\\)$"),Op=new RegExp("^rgb\\("+[Lt,Lt,Lt]+"\\)$"),Ip=new RegExp("^rgba\\("+[$e,$e,$e,Sr]+"\\)$"),Tp=new RegExp("^rgba\\("+[Lt,Lt,Lt,Sr]+"\\)$"),Dp=new RegExp("^hsl\\("+[Sr,Lt,Lt]+"\\)$"),Lp=new RegExp("^hsla\\("+[Sr,Lt,Lt,Sr]+"\\)$"),tl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$n(Ar,Et,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:el,formatHex:el,formatHsl:Bp,formatRgb:rl,toString:rl});function el(){return this.rgb().formatHex()}function Bp(){return sl(this).formatHsl()}function rl(){return this.rgb().formatRgb()}function Et(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Pp.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?nl(e):r===3?new wt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Gn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Gn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ep.exec(t))?new wt(e[1],e[2],e[3],1):(e=Op.exec(t))?new wt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ip.exec(t))?Gn(e[1],e[2],e[3],e[4]):(e=Tp.exec(t))?Gn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Dp.exec(t))?al(e[1],e[2]/100,e[3]/100,1):(e=Lp.exec(t))?al(e[1],e[2]/100,e[3]/100,e[4]):tl.hasOwnProperty(t)?nl(tl[t]):t==="transparent"?new wt(NaN,NaN,NaN,0):null}function nl(t){return new wt(t>>16&255,t>>8&255,t&255,1)}function Gn(t,e,r,n){return n<=0&&(t=e=r=NaN),new wt(t,e,r,n)}function qp(t){return t instanceof Ar||(t=Et(t)),t?(t=t.rgb(),new wt(t.r,t.g,t.b,t.opacity)):new wt}function Ge(t,e,r,n){return arguments.length===1?qp(t):new wt(t,e,r,n??1)}function wt(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}$n(wt,Ge,xo(Ar,{brighter:function(t){return t=t==null?Vn:Math.pow(Vn,t),new wt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?_r:Math.pow(_r,t),new wt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:il,formatHex:il,formatRgb:ol,toString:ol}));function il(){return"#"+vo(this.r)+vo(this.g)+vo(this.b)}function ol(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function vo(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function al(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Dt(t,e,r,n)}function sl(t){if(t instanceof Dt)return new Dt(t.h,t.s,t.l,t.opacity);if(t instanceof Ar||(t=Et(t)),!t)return new Dt;if(t instanceof Dt)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),o=Math.max(e,r,n),a=NaN,s=o-i,l=(o+i)/2;return s?(e===o?a=(r-n)/s+(r<n)*6:r===o?a=(n-e)/s+2:a=(e-r)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new Dt(a,s,l,t.opacity)}function ll(t,e,r,n){return arguments.length===1?sl(t):new Dt(t,e,r,n??1)}function Dt(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}$n(Dt,ll,xo(Ar,{brighter:function(t){return t=t==null?Vn:Math.pow(Vn,t),new Dt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?_r:Math.pow(_r,t),new Dt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new wt(wo(t>=240?t-240:t+120,i,n),wo(t,i,n),wo(t<120?t+240:t-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function wo(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}function bo(t,e,r,n,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*r+(1+3*t+3*o-3*a)*n+a*i)/6}function ul(t){var e=t.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),i=t[n],o=t[n+1],a=n>0?t[n-1]:2*i-o,s=n<e-1?t[n+2]:2*o-i;return bo((r-n/e)*e,a,i,o,s)}}function fl(t){var e=t.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*e),i=t[(n+e-1)%e],o=t[n%e],a=t[(n+1)%e],s=t[(n+2)%e];return bo((r-n/e)*e,i,o,a,s)}}function zr(t){return function(){return t}}function Hp(t,e){return function(r){return t+r*e}}function Fp(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function cl(t){return(t=+t)==1?Xn:function(e,r){return r-e?Fp(e,r,t):zr(isNaN(e)?r:e)}}function Xn(t,e){var r=e-t;return r?Hp(t,r):zr(isNaN(t)?e:t)}var pe=function t(e){var r=cl(e);function n(i,o){var a=r((i=Ge(i)).r,(o=Ge(o)).r),s=r(i.g,o.g),l=r(i.b,o.b),u=Xn(i.opacity,o.opacity);return function(f){return i.r=a(f),i.g=s(f),i.b=l(f),i.opacity=u(f),i+""}}return n.gamma=t,n}(1);function hl(t){return function(e){var r=e.length,n=new Array(r),i=new Array(r),o=new Array(r),a,s;for(a=0;a<r;++a)s=Ge(e[a]),n[a]=s.r||0,i[a]=s.g||0,o[a]=s.b||0;return n=t(n),i=t(i),o=t(o),s.opacity=1,function(l){return s.r=n(l),s.g=i(l),s.b=o(l),s+""}}}var $p=hl(ul),Gp=hl(fl);function pl(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(o){for(i=0;i<r;++i)n[i]=t[i]*(1-o)+e[i]*o;return n}}function ml(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function dl(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),o=new Array(r),a;for(a=0;a<n;++a)i[a]=me(t[a],e[a]);for(;a<r;++a)o[a]=e[a];return function(s){for(a=0;a<n;++a)o[a]=i[a](s);return o}}function gl(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function st(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function yl(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=me(t[i],e[i]):n[i]=e[i];return function(o){for(i in r)n[i]=r[i](o);return n}}var Mo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ko=new RegExp(Mo.source,"g");function Vp(t){return function(){return t}}function Xp(t){return function(e){return t(e)+""}}function Cr(t,e){var r=Mo.lastIndex=ko.lastIndex=0,n,i,o,a=-1,s=[],l=[];for(t=t+"",e=e+"";(n=Mo.exec(t))&&(i=ko.exec(e));)(o=i.index)>r&&(o=e.slice(r,o),s[a]?s[a]+=o:s[++a]=o),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:st(n,i)})),r=ko.lastIndex;return r<e.length&&(o=e.slice(r),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?Xp(l[0].x):Vp(e):(e=l.length,function(u){for(var f=0,c;f<e;++f)s[(c=l[f]).i]=c.x(u);return s.join("")})}function me(t,e){var r=typeof e,n;return e==null||r==="boolean"?zr(e):(r==="number"?st:r==="string"?(n=Et(e))?(e=n,pe):Cr:e instanceof Et?pe:e instanceof Date?gl:ml(e)?pl:Array.isArray(e)?dl:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?yl:st)(t,e)}function _o(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}var xl=180/Math.PI,Wn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function So(t,e,r,n,i,o){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*r+e*n)&&(r-=t*l,n-=e*l),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,l/=s),t*n<e*r&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*xl,skewX:Math.atan(l)*xl,scaleX:a,scaleY:s}}var Rr,Ao,vl,Un;function wl(t){return t==="none"?Wn:(Rr||(Rr=document.createElement("DIV"),Ao=document.documentElement,vl=document.defaultView),Rr.style.transform=t,t=vl.getComputedStyle(Ao.appendChild(Rr),null).getPropertyValue("transform"),Ao.removeChild(Rr),t=t.slice(7,-1).split(","),So(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function bl(t){return t==null?Wn:(Un||(Un=document.createElementNS("http://www.w3.org/2000/svg","g")),Un.setAttribute("transform",t),(t=Un.transform.baseVal.consolidate())?(t=t.matrix,So(t.a,t.b,t.c,t.d,t.e,t.f)):Wn)}function kl(t,e,r,n){function i(u){return u.length?u.pop()+" ":""}function o(u,f,c,h,m,g){if(u!==c||f!==h){var p=m.push("translate(",null,e,null,r);g.push({i:p-4,x:st(u,c)},{i:p-2,x:st(f,h)})}else(c||h)&&m.push("translate("+c+e+h+r)}function a(u,f,c,h){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),h.push({i:c.push(i(c)+"rotate(",null,n)-2,x:st(u,f)})):f&&c.push(i(c)+"rotate("+f+n)}function s(u,f,c,h){u!==f?h.push({i:c.push(i(c)+"skewX(",null,n)-2,x:st(u,f)}):f&&c.push(i(c)+"skewX("+f+n)}function l(u,f,c,h,m,g){if(u!==c||f!==h){var p=m.push(i(m)+"scale(",null,",",null,")");g.push({i:p-4,x:st(u,c)},{i:p-2,x:st(f,h)})}else(c!==1||h!==1)&&m.push(i(m)+"scale("+c+","+h+")")}return function(u,f){var c=[],h=[];return u=t(u),f=t(f),o(u.translateX,u.translateY,f.translateX,f.translateY,c,h),a(u.rotate,f.rotate,c,h),s(u.skewX,f.skewX,c,h),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,c,h),u=f=null,function(m){for(var g=-1,p=h.length,y;++g<p;)c[(y=h[g]).i]=y.x(m);return c.join("")}}}var zo=kl(wl,"px, ","px)","deg)"),Co=kl(bl,", ",")",")");var Nr=Math.SQRT2,Ro=2,Ml=4,Wp=1e-12;function _l(t){return((t=Math.exp(t))+1/t)/2}function Up(t){return((t=Math.exp(t))-1/t)/2}function Yp(t){return((t=Math.exp(2*t))-1)/(t+1)}function No(t,e){var r=t[0],n=t[1],i=t[2],o=e[0],a=e[1],s=e[2],l=o-r,u=a-n,f=l*l+u*u,c,h;if(f<Wp)h=Math.log(s/i)/Nr,c=function(w){return[r+w*l,n+w*u,i*Math.exp(Nr*w*h)]};else{var m=Math.sqrt(f),g=(s*s-i*i+Ml*f)/(2*i*Ro*m),p=(s*s-i*i-Ml*f)/(2*s*Ro*m),y=Math.log(Math.sqrt(g*g+1)-g),b=Math.log(Math.sqrt(p*p+1)-p);h=(b-y)/Nr,c=function(w){var v=w*h,S=_l(y),R=i/(Ro*m)*(S*Yp(Nr*v+y)-Up(y));return[r+R*l,n+R*u,i*S/_l(Nr*v+y)]}}return c.duration=h*1e3,c}var Ve=0,Er=0,Pr=0,Al=1e3,Yn,Or,Kn=0,de=0,Qn=0,Ir=typeof performance=="object"&&performance.now?performance:Date,zl=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xe(){return de||(zl(Kp),de=Ir.now()+Qn)}function Kp(){de=0}function Tr(){this._call=this._time=this._next=null}Tr.prototype=Zn.prototype={constructor:Tr,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?Xe():+r)+(e==null?0:+e),!this._next&&Or!==this&&(Or?Or._next=this:Yn=this,Or=this),this._call=t,this._time=r,Po()},stop:function(){this._call&&(this._call=null,this._time=1/0,Po())}};function Zn(t,e,r){var n=new Tr;return n.restart(t,e,r),n}function Cl(){Xe(),++Ve;for(var t=Yn,e;t;)(e=de-t._time)>=0&&t._call.call(null,e),t=t._next;--Ve}function Sl(){de=(Kn=Ir.now())+Qn,Ve=Er=0;try{Cl()}finally{Ve=0,Zp(),de=0}}function Qp(){var t=Ir.now(),e=t-Kn;e>Al&&(Qn-=e,Kn=t)}function Zp(){for(var t,e=Yn,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:Yn=r);Or=t,Po(n)}function Po(t){if(!Ve){Er&&(Er=clearTimeout(Er));var e=t-de;e>24?(t<1/0&&(Er=setTimeout(Sl,t-Ir.now()-Qn)),Pr&&(Pr=clearInterval(Pr))):(Pr||(Kn=Ir.now(),Pr=setInterval(Qp,Al)),Ve=1,zl(Sl))}}function jn(t,e,r){var n=new Tr;return e=e==null?0:+e,n.restart(function(i){n.stop(),t(i+e)},e,r),n}var jp=wr("start","end","cancel","interrupt"),Jp=[],Nl=0,Eo=1,ti=2,Jn=3,Rl=4,ei=5,Dr=6;function ee(t,e,r,n,i,o){var a=t.__transition;if(!a)t.__transition={};else if(r in a)return;tm(t,r,{name:e,index:n,group:i,on:jp,tween:Jp,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Nl})}function Lr(t,e){var r=et(t,e);if(r.state>Nl)throw new Error("too late; already scheduled");return r}function pt(t,e){var r=et(t,e);if(r.state>Jn)throw new Error("too late; already running");return r}function et(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function tm(t,e,r){var n=t.__transition,i;n[e]=r,r.timer=Zn(o,0,r.time);function o(u){r.state=Eo,r.timer.restart(a,r.delay,r.time),r.delay<=u&&a(u-r.delay)}function a(u){var f,c,h,m;if(r.state!==Eo)return l();for(f in n)if(m=n[f],m.name===r.name){if(m.state===Jn)return jn(a);m.state===Rl?(m.state=Dr,m.timer.stop(),m.on.call("interrupt",t,t.__data__,m.index,m.group),delete n[f]):+f<e&&(m.state=Dr,m.timer.stop(),m.on.call("cancel",t,t.__data__,m.index,m.group),delete n[f])}if(jn(function(){r.state===Jn&&(r.state=Rl,r.timer.restart(s,r.delay,r.time),s(u))}),r.state=ti,r.on.call("start",t,t.__data__,r.index,r.group),r.state===ti){for(r.state=Jn,i=new Array(h=r.tween.length),f=0,c=-1;f<h;++f)(m=r.tween[f].value.call(t,t.__data__,r.index,r.group))&&(i[++c]=m);i.length=c+1}}function s(u){for(var f=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(l),r.state=ei,1),c=-1,h=i.length;++c<h;)i[c].call(t,f);r.state===ei&&(r.on.call("end",t,t.__data__,r.index,r.group),l())}function l(){r.state=Dr,r.timer.stop(),delete n[e];for(var u in n)return;delete t.__transition}}function re(t,e){var r=t.__transition,n,i,o=!0,a;if(!!r){e=e==null?null:e+"";for(a in r){if((n=r[a]).name!==e){o=!1;continue}i=n.state>ti&&n.state<ei,n.state=Dr,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[a]}o&&delete t.__transition}}function Pl(t){return this.each(function(){re(this,t)})}function em(t,e){var r,n;return function(){var i=pt(this,t),o=i.tween;if(o!==r){n=r=o;for(var a=0,s=n.length;a<s;++a)if(n[a].name===e){n=n.slice(),n.splice(a,1);break}}i.tween=n}}function rm(t,e,r){var n,i;if(typeof r!="function")throw new Error;return function(){var o=pt(this,t),a=o.tween;if(a!==n){i=(n=a).slice();for(var s={name:e,value:r},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=s;break}l===u&&i.push(s)}o.tween=i}}function El(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=et(this.node(),r).tween,i=0,o=n.length,a;i<o;++i)if((a=n[i]).name===t)return a.value;return null}return this.each((e==null?em:rm)(r,t,e))}function We(t,e,r){var n=t._id;return t.each(function(){var i=pt(this,n);(i.value||(i.value={}))[e]=r.apply(this,arguments)}),function(i){return et(i,n).value[e]}}function ri(t,e){var r;return(typeof e=="number"?st:e instanceof Et?pe:(r=Et(e))?(e=r,pe):Cr)(t,e)}function nm(t){return function(){this.removeAttribute(t)}}function im(t){return function(){this.removeAttributeNS(t.space,t.local)}}function om(t,e,r){var n,i=r+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===n?o:o=e(n=a,r)}}function am(t,e,r){var n,i=r+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===n?o:o=e(n=a,r)}}function sm(t,e,r){var n,i,o;return function(){var a,s=r(this),l;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=s+"",a===l?null:a===n&&l===i?o:(i=l,o=e(n=a,s)))}}function lm(t,e,r){var n,i,o;return function(){var a,s=r(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=s+"",a===l?null:a===n&&l===i?o:(i=l,o=e(n=a,s)))}}function Ol(t,e){var r=Ut(t),n=r==="transform"?Co:ri;return this.attrTween(t,typeof e=="function"?(r.local?lm:sm)(r,n,We(this,"attr."+t,e)):e==null?(r.local?im:nm)(r):(r.local?am:om)(r,n,e))}function um(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function fm(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function cm(t,e){var r,n;function i(){var o=e.apply(this,arguments);return o!==n&&(r=(n=o)&&fm(t,o)),r}return i._value=e,i}function hm(t,e){var r,n;function i(){var o=e.apply(this,arguments);return o!==n&&(r=(n=o)&&um(t,o)),r}return i._value=e,i}function Il(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=Ut(t);return this.tween(r,(n.local?cm:hm)(n,e))}function pm(t,e){return function(){Lr(this,t).delay=+e.apply(this,arguments)}}function mm(t,e){return e=+e,function(){Lr(this,t).delay=e}}function Tl(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?pm:mm)(e,t)):et(this.node(),e).delay}function dm(t,e){return function(){pt(this,t).duration=+e.apply(this,arguments)}}function gm(t,e){return e=+e,function(){pt(this,t).duration=e}}function Dl(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?dm:gm)(e,t)):et(this.node(),e).duration}function ym(t,e){if(typeof e!="function")throw new Error;return function(){pt(this,t).ease=e}}function Ll(t){var e=this._id;return arguments.length?this.each(ym(e,t)):et(this.node(),e).ease}function Bl(t){typeof t!="function"&&(t=kr(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var o=e[i],a=o.length,s=n[i]=[],l,u=0;u<a;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&s.push(l);return new ft(n,this._parents,this._name,this._id)}function ql(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,i=r.length,o=Math.min(n,i),a=new Array(n),s=0;s<o;++s)for(var l=e[s],u=r[s],f=l.length,c=a[s]=new Array(f),h,m=0;m<f;++m)(h=l[m]||u[m])&&(c[m]=h);for(;s<n;++s)a[s]=e[s];return new ft(a,this._parents,this._name,this._id)}function xm(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function vm(t,e,r){var n,i,o=xm(e)?Lr:pt;return function(){var a=o(this,t),s=a.on;s!==n&&(i=(n=s).copy()).on(e,r),a.on=i}}function Hl(t,e){var r=this._id;return arguments.length<2?et(this.node(),r).on.on(t):this.each(vm(r,t,e))}function wm(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function Fl(){return this.on("end.remove",wm(this._id))}function $l(t){var e=this._name,r=this._id;typeof t!="function"&&(t=he(t));for(var n=this._groups,i=n.length,o=new Array(i),a=0;a<i;++a)for(var s=n[a],l=s.length,u=o[a]=new Array(l),f,c,h=0;h<l;++h)(f=s[h])&&(c=t.call(f,f.__data__,h,s))&&("__data__"in f&&(c.__data__=f.__data__),u[h]=c,ee(u[h],e,r,h,u,et(f,r)));return new ft(o,this._parents,e,r)}function Gl(t){var e=this._name,r=this._id;typeof t!="function"&&(t=br(t));for(var n=this._groups,i=n.length,o=[],a=[],s=0;s<i;++s)for(var l=n[s],u=l.length,f,c=0;c<u;++c)if(f=l[c]){for(var h=t.call(f,f.__data__,c,l),m,g=et(f,r),p=0,y=h.length;p<y;++p)(m=h[p])&&ee(m,e,r,p,h,g);o.push(h),a.push(f)}return new ft(o,a,e,r)}var bm=Yt.prototype.constructor;function Vl(){return new bm(this._groups,this._parents)}function km(t,e){var r,n,i;return function(){var o=te(this,t),a=(this.style.removeProperty(t),te(this,t));return o===a?null:o===r&&a===n?i:i=e(r=o,n=a)}}function Xl(t){return function(){this.style.removeProperty(t)}}function Mm(t,e,r){var n,i=r+"",o;return function(){var a=te(this,t);return a===i?null:a===n?o:o=e(n=a,r)}}function _m(t,e,r){var n,i,o;return function(){var a=te(this,t),s=r(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),te(this,t))),a===l?null:a===n&&l===i?o:(i=l,o=e(n=a,s))}}function Sm(t,e){var r,n,i,o="style."+e,a="end."+o,s;return function(){var l=pt(this,t),u=l.on,f=l.value[o]==null?s||(s=Xl(e)):void 0;(u!==r||i!==f)&&(n=(r=u).copy()).on(a,i=f),l.on=n}}function Wl(t,e,r){var n=(t+="")=="transform"?zo:ri;return e==null?this.styleTween(t,km(t,n)).on("end.style."+t,Xl(t)):typeof e=="function"?this.styleTween(t,_m(t,n,We(this,"style."+t,e))).each(Sm(this._id,t)):this.styleTween(t,Mm(t,n,e),r).on("end.style."+t,null)}function Am(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function zm(t,e,r){var n,i;function o(){var a=e.apply(this,arguments);return a!==i&&(n=(i=a)&&Am(t,a,r)),n}return o._value=e,o}function Ul(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,zm(t,e,r??""))}function Cm(t){return function(){this.textContent=t}}function Rm(t){return function(){var e=t(this);this.textContent=e??""}}function Yl(t){return this.tween("text",typeof t=="function"?Rm(We(this,"text",t)):Cm(t==null?"":t+""))}function Nm(t){return function(e){this.textContent=t.call(this,e)}}function Pm(t){var e,r;function n(){var i=t.apply(this,arguments);return i!==r&&(e=(r=i)&&Nm(i)),e}return n._value=t,n}function Kl(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Pm(t))}function Ql(){for(var t=this._name,e=this._id,r=ni(),n=this._groups,i=n.length,o=0;o<i;++o)for(var a=n[o],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var f=et(l,e);ee(l,t,r,u,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new ft(n,this._parents,t,r)}function Zl(){var t,e,r=this,n=r._id,i=r.size();return new Promise(function(o,a){var s={value:a},l={value:function(){--i===0&&o()}};r.each(function(){var u=pt(this,n),f=u.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),u.on=e})})}var Em=0;function ft(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function Oo(t){return Yt().transition(t)}function ni(){return++Em}var Ue=Yt.prototype;ft.prototype=Oo.prototype={constructor:ft,select:$l,selectAll:Gl,filter:Bl,merge:ql,selection:Vl,transition:Ql,call:Ue.call,nodes:Ue.nodes,node:Ue.node,size:Ue.size,empty:Ue.empty,each:Ue.each,on:Hl,attr:Ol,attrTween:Il,style:Wl,styleTween:Ul,text:Yl,textTween:Kl,remove:Fl,tween:El,delay:Tl,duration:Dl,ease:Ll,end:Zl};function ii(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Io={time:null,delay:0,duration:250,ease:ii};function Om(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))return Io.time=Xe(),Io;return r}function jl(t){var e,r;t instanceof ft?(e=t._id,t=t._name):(e=ni(),(r=Io).time=Xe(),t=t==null?null:t+"");for(var n=this._groups,i=n.length,o=0;o<i;++o)for(var a=n[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&ee(l,t,e,u,a,r||Om(l,e));return new ft(n,this._parents,t,e)}Yt.prototype.interrupt=Pl;Yt.prototype.transition=jl;function Jl(t){return[+t[0],+t[1]]}function Im(t){return[Jl(t[0]),Jl(t[1])]}var E_={name:"x",handles:["w","e"].map(To),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},O_={name:"y",handles:["n","s"].map(To),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},I_={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(To),input:function(t){return t==null?null:Im(t)},output:function(t){return t}};function To(t){return{type:t}}var tu=Math.PI,Tm=tu/2,Dm=tu*2;var Lm=Array.prototype.slice;var Do=Math.PI,Lo=2*Do,ge=1e-6,Bm=Lo-ge;function Bo(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function eu(){return new Bo}Bo.prototype=eu.prototype={constructor:Bo,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,r,n){this._+="Q"+ +t+","+ +e+","+(this._x1=+r)+","+(this._y1=+n)},bezierCurveTo:function(t,e,r,n,i,o){this._+="C"+ +t+","+ +e+","+ +r+","+ +n+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,r,n,i){t=+t,e=+e,r=+r,n=+n,i=+i;var o=this._x1,a=this._y1,s=r-t,l=n-e,u=o-t,f=a-e,c=u*u+f*f;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(c>ge)if(!(Math.abs(f*s-l*u)>ge)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var h=r-o,m=n-a,g=s*s+l*l,p=h*h+m*m,y=Math.sqrt(g),b=Math.sqrt(c),w=i*Math.tan((Do-Math.acos((g+c-p)/(2*y*b)))/2),v=w/b,S=w/y;Math.abs(v-1)>ge&&(this._+="L"+(t+v*u)+","+(e+v*f)),this._+="A"+i+","+i+",0,0,"+ +(f*h>u*m)+","+(this._x1=t+S*s)+","+(this._y1=e+S*l)}},arc:function(t,e,r,n,i,o){t=+t,e=+e,r=+r,o=!!o;var a=r*Math.cos(n),s=r*Math.sin(n),l=t+a,u=e+s,f=1^o,c=o?n-i:i-n;if(r<0)throw new Error("negative radius: "+r);this._x1===null?this._+="M"+l+","+u:(Math.abs(this._x1-l)>ge||Math.abs(this._y1-u)>ge)&&(this._+="L"+l+","+u),!!r&&(c<0&&(c=c%Lo+Lo),c>Bm?this._+="A"+r+","+r+",0,1,"+f+","+(t-a)+","+(e-s)+"A"+r+","+r+",0,1,"+f+","+(this._x1=l)+","+(this._y1=u):c>ge&&(this._+="A"+r+","+r+",0,"+ +(c>=Do)+","+f+","+(this._x1=t+r*Math.cos(i))+","+(this._y1=e+r*Math.sin(i))))},rect:function(t,e,r,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +r+"v"+ +n+"h"+-r+"Z"},toString:function(){return this._}};var ye=eu;var bt="$";function oi(){}oi.prototype=ru.prototype={constructor:oi,has:function(t){return bt+t in this},get:function(t){return this[bt+t]},set:function(t,e){return this[bt+t]=e,this},remove:function(t){var e=bt+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===bt&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===bt&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===bt&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===bt&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===bt&&++t;return t},empty:function(){for(var t in this)if(t[0]===bt)return!1;return!0},each:function(t){for(var e in this)e[0]===bt&&t(this[e],e.slice(1),this)}};function ru(t,e){var r=new oi;if(t instanceof oi)t.each(function(s,l){r.set(l,s)});else if(Array.isArray(t)){var n=-1,i=t.length,o;if(e==null)for(;++n<i;)r.set(n,t[n]);else for(;++n<i;)r.set(e(o=t[n],n,t),o)}else if(t)for(var a in t)r.set(a,t[a]);return r}var xe=ru;function ai(){}var ve=xe.prototype;ai.prototype=qm.prototype={constructor:ai,has:ve.has,add:function(t){return t+="",this[bt+t]=t,this},remove:ve.remove,clear:ve.clear,values:ve.keys,size:ve.size,empty:ve.empty,each:ve.each};function qm(t,e){var r=new ai;if(t instanceof ai)t.each(function(o){r.add(o)});else if(t){var n=-1,i=t.length;if(e==null)for(;++n<i;)r.add(t[n]);else for(;++n<i;)r.add(e(t[n],n,t))}return r}var Hm=Array.prototype,nu=Hm.slice;var xA=Math.PI*(3-Math.sqrt(5));function we(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Bt(t){return t=we(Math.abs(t)),t?t[1]:NaN}function ou(t,e){return function(r,n){for(var i=r.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),o.push(r.substring(i-=s,i+s)),!((l+=s+1)>n));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function au(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var Gm=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ne(t){if(!(e=Gm.exec(t)))throw new Error("invalid format: "+t);var e;return new si({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ne.prototype=si.prototype;function si(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}si.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function su(t){t:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break t;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var qo;function lu(t,e){var r=we(t,e);if(!r)return t+"";var n=r[0],i=r[1],o=i-(qo=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=n.length;return o===a?n:o>a?n+new Array(o-a+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+we(t,Math.max(0,e+o-1))[0]}function Ho(t,e){var r=we(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}var Fo={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Ho(t*100,e)},r:Ho,s:lu,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function $o(t){return t}var uu=Array.prototype.map,fu=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function cu(t){var e=t.grouping===void 0||t.thousands===void 0?$o:ou(uu.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?$o:au(uu.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"-":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(c){c=ne(c);var h=c.fill,m=c.align,g=c.sign,p=c.symbol,y=c.zero,b=c.width,w=c.comma,v=c.precision,S=c.trim,R=c.type;R==="n"?(w=!0,R="g"):Fo[R]||(v===void 0&&(v=12),S=!0,R="g"),(y||h==="0"&&m==="=")&&(y=!0,h="0",m="=");var E=p==="$"?r:p==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",q=p==="$"?n:/[%p]/.test(R)?a:"",G=Fo[R],H=/[defgprs%]/.test(R);v=v===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function P(k){var d=E,x=q,M,A,C;if(R==="c")x=G(k)+x,k="";else{k=+k;var T=k<0||1/k<0;if(k=isNaN(k)?l:G(Math.abs(k),v),S&&(k=su(k)),T&&+k==0&&g!=="+"&&(T=!1),d=(T?g==="("?g:s:g==="-"||g==="("?"":g)+d,x=(R==="s"?fu[8+qo/3]:"")+x+(T&&g==="("?")":""),H){for(M=-1,A=k.length;++M<A;)if(C=k.charCodeAt(M),48>C||C>57){x=(C===46?i+k.slice(M+1):k.slice(M))+x,k=k.slice(0,M);break}}}w&&!y&&(k=e(k,1/0));var D=d.length+k.length+x.length,$=D<b?new Array(b-D+1).join(h):"";switch(w&&y&&(k=e($+k,$.length?b-x.length:1/0),$=""),m){case"<":k=d+k+x+$;break;case"=":k=d+$+k+x;break;case"^":k=$.slice(0,D=$.length>>1)+d+k+x+$.slice(D);break;default:k=$+d+k+x;break}return o(k)}return P.toString=function(){return c+""},P}function f(c,h){var m=u((c=ne(c),c.type="f",c)),g=Math.max(-8,Math.min(8,Math.floor(Bt(h)/3)))*3,p=Math.pow(10,-g),y=fu[8+g/3];return function(b){return m(p*b)+y}}return{format:u,formatPrefix:f}}var li,ui,fi;Go({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Go(t){return li=cu(t),ui=li.format,fi=li.formatPrefix,li}function Vo(t){return Math.max(0,-Bt(Math.abs(t)))}function Xo(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Bt(e)/3)))*3-Bt(Math.abs(t)))}function Wo(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Bt(e)-Bt(t))+1}function _t(){return Math.random()}var Vm=function t(e){function r(n,i){return n=n==null?0:+n,i=i==null?1:+i,arguments.length===1?(i=n,n=0):i-=n,function(){return e()*i+n}}return r.source=t,r}(_t);var Uo=function t(e){function r(n,i){var o,a;return n=n==null?0:+n,i=i==null?1:+i,function(){var s;if(o!=null)s=o,o=null;else do o=e()*2-1,s=e()*2-1,a=o*o+s*s;while(!a||a>1);return n+i*s*Math.sqrt(-2*Math.log(a)/a)}}return r.source=t,r}(_t);var Xm=function t(e){function r(){var n=Uo.source(e).apply(this,arguments);return function(){return Math.exp(n())}}return r.source=t,r}(_t);var Yo=function t(e){function r(n){return function(){for(var i=0,o=0;o<n;++o)i+=e();return i}}return r.source=t,r}(_t);var Wm=function t(e){function r(n){var i=Yo.source(e)(n);return function(){return i()/n}}return r.source=t,r}(_t);var Um=function t(e){function r(n){return function(){return-Math.log(1-e())/n}}return r.source=t,r}(_t);function St(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var hu=Array.prototype,ci=hu.map,be=hu.slice;function pu(t){return function(){return t}}function Ko(t){return+t}var mu=[0,1];function At(t){return t}function Qo(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:pu(isNaN(e)?NaN:.5)}function du(t){var e=t[0],r=t[t.length-1],n;return e>r&&(n=e,e=r,r=n),function(i){return Math.max(e,Math.min(r,i))}}function Km(t,e,r){var n=t[0],i=t[1],o=e[0],a=e[1];return i<n?(n=Qo(i,n),o=r(a,o)):(n=Qo(n,i),o=r(o,a)),function(s){return o(n(s))}}function Qm(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),o=new Array(n),a=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<n;)i[a]=Qo(t[a],t[a+1]),o[a]=r(e[a],e[a+1]);return function(s){var l=Jt(t,s,1,n)-1;return o[l](i[l](s))}}function Ye(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function hi(){var t=mu,e=mu,r=me,n,i,o,a=At,s,l,u;function f(){return s=Math.min(t.length,e.length)>2?Qm:Km,l=u=null,c}function c(h){return isNaN(h=+h)?o:(l||(l=s(t.map(n),e,r)))(n(a(h)))}return c.invert=function(h){return a(i((u||(u=s(e,t.map(n),st)))(h)))},c.domain=function(h){return arguments.length?(t=ci.call(h,Ko),a===At||(a=du(t)),f()):t.slice()},c.range=function(h){return arguments.length?(e=be.call(h),f()):e.slice()},c.rangeRound=function(h){return e=be.call(h),r=_o,f()},c.clamp=function(h){return arguments.length?(a=h?du(t):At,c):a!==At},c.interpolate=function(h){return arguments.length?(r=h,f()):r},c.unknown=function(h){return arguments.length?(o=h,c):o},function(h,m){return n=h,i=m,f()}}function pi(t,e){return hi()(t,e)}function Zo(t,e,r,n){var i=ce(t,e,r),o;switch(n=ne(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(o=Xo(i,a))&&(n.precision=o),fi(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=Wo(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=Vo(i))&&(n.precision=o-(n.type==="%")*2);break}}return ui(n)}function ke(t){var e=t.domain;return t.ticks=function(r){var n=e();return Cn(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return Zo(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,o=n.length-1,a=n[i],s=n[o],l;return s<a&&(l=a,a=s,s=l,l=i,i=o,o=l),l=He(a,s,r),l>0?(a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l,l=He(a,s,r)):l<0&&(a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l,l=He(a,s,r)),l>0?(n[i]=Math.floor(a/l)*l,n[o]=Math.ceil(s/l)*l,e(n)):l<0&&(n[i]=Math.ceil(a*l)/l,n[o]=Math.floor(s*l)/l,e(n)),t},t}function vt(){var t=pi(At,At);return t.copy=function(){return Ye(t,vt())},St.apply(t,arguments),ke(t)}var jm=1e3,Jm=jm*60,td=Jm*60,jo=td*24,uC=jo*7,fC=jo*30,cC=jo*365;function Kt(t){return function(){return t}}var Jo=Math.abs,lt=Math.atan2,ie=Math.cos,yu=Math.max,mi=Math.min,Ot=Math.sin,Me=Math.sqrt,mt=1e-12,Ke=Math.PI,qr=Ke/2,xu=2*Ke;function vu(t){return t>1?0:t<-1?Ke:Math.acos(t)}function ta(t){return t>=1?qr:t<=-1?-qr:Math.asin(t)}function od(t){return t.innerRadius}function ad(t){return t.outerRadius}function sd(t){return t.startAngle}function ld(t){return t.endAngle}function ud(t){return t&&t.padAngle}function fd(t,e,r,n,i,o,a,s){var l=r-t,u=n-e,f=a-i,c=s-o,h=c*l-f*u;if(!(h*h<mt))return h=(f*(e-o)-c*(t-i))/h,[t+h*l,e+h*u]}function di(t,e,r,n,i,o,a){var s=t-r,l=e-n,u=(a?o:-o)/Me(s*s+l*l),f=u*l,c=-u*s,h=t+f,m=e+c,g=r+f,p=n+c,y=(h+g)/2,b=(m+p)/2,w=g-h,v=p-m,S=w*w+v*v,R=i-o,E=h*p-g*m,q=(v<0?-1:1)*Me(yu(0,R*R*S-E*E)),G=(E*v-w*q)/S,H=(-E*w-v*q)/S,P=(E*v+w*q)/S,k=(-E*w+v*q)/S,d=G-y,x=H-b,M=P-y,A=k-b;return d*d+x*x>M*M+A*A&&(G=P,H=k),{cx:G,cy:H,x01:-f,y01:-c,x11:G*(i/R-1),y11:H*(i/R-1)}}function _e(){var t=od,e=ad,r=Kt(0),n=null,i=sd,o=ld,a=ud,s=null;function l(){var u,f,c=+t.apply(this,arguments),h=+e.apply(this,arguments),m=i.apply(this,arguments)-qr,g=o.apply(this,arguments)-qr,p=Jo(g-m),y=g>m;if(s||(s=u=ye()),h<c&&(f=h,h=c,c=f),!(h>mt))s.moveTo(0,0);else if(p>xu-mt)s.moveTo(h*ie(m),h*Ot(m)),s.arc(0,0,h,m,g,!y),c>mt&&(s.moveTo(c*ie(g),c*Ot(g)),s.arc(0,0,c,g,m,y));else{var b=m,w=g,v=m,S=g,R=p,E=p,q=a.apply(this,arguments)/2,G=q>mt&&(n?+n.apply(this,arguments):Me(c*c+h*h)),H=mi(Jo(h-c)/2,+r.apply(this,arguments)),P=H,k=H,d,x;if(G>mt){var M=ta(G/c*Ot(q)),A=ta(G/h*Ot(q));(R-=M*2)>mt?(M*=y?1:-1,v+=M,S-=M):(R=0,v=S=(m+g)/2),(E-=A*2)>mt?(A*=y?1:-1,b+=A,w-=A):(E=0,b=w=(m+g)/2)}var C=h*ie(b),T=h*Ot(b),D=c*ie(S),$=c*Ot(S);if(H>mt){var J=h*ie(w),xt=h*Ot(w),z=c*ie(v),O=c*Ot(v),I;if(p<Ke&&(I=fd(C,T,z,O,J,xt,D,$))){var U=C-I[0],K=T-I[1],tt=J-I[0],Pt=xt-I[1],ht=1/Ot(vu((U*tt+K*Pt)/(Me(U*U+K*K)*Me(tt*tt+Pt*Pt)))/2),jt=Me(I[0]*I[0]+I[1]*I[1]);P=mi(H,(c-jt)/(ht-1)),k=mi(H,(h-jt)/(ht+1))}}E>mt?k>mt?(d=di(z,O,C,T,h,k,y),x=di(J,xt,D,$,h,k,y),s.moveTo(d.cx+d.x01,d.cy+d.y01),k<H?s.arc(d.cx,d.cy,k,lt(d.y01,d.x01),lt(x.y01,x.x01),!y):(s.arc(d.cx,d.cy,k,lt(d.y01,d.x01),lt(d.y11,d.x11),!y),s.arc(0,0,h,lt(d.cy+d.y11,d.cx+d.x11),lt(x.cy+x.y11,x.cx+x.x11),!y),s.arc(x.cx,x.cy,k,lt(x.y11,x.x11),lt(x.y01,x.x01),!y))):(s.moveTo(C,T),s.arc(0,0,h,b,w,!y)):s.moveTo(C,T),!(c>mt)||!(R>mt)?s.lineTo(D,$):P>mt?(d=di(D,$,J,xt,c,-P,y),x=di(C,T,z,O,c,-P,y),s.lineTo(d.cx+d.x01,d.cy+d.y01),P<H?s.arc(d.cx,d.cy,P,lt(d.y01,d.x01),lt(x.y01,x.x01),!y):(s.arc(d.cx,d.cy,P,lt(d.y01,d.x01),lt(d.y11,d.x11),!y),s.arc(0,0,c,lt(d.cy+d.y11,d.cx+d.x11),lt(x.cy+x.y11,x.cx+x.x11),y),s.arc(x.cx,x.cy,P,lt(x.y11,x.x11),lt(x.y01,x.x01),!y))):s.arc(0,0,c,S,v,y)}if(s.closePath(),u)return s=null,u+""||null}return l.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Ke/2;return[ie(f)*u,Ot(f)*u]},l.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:Kt(+u),l):t},l.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:Kt(+u),l):e},l.cornerRadius=function(u){return arguments.length?(r=typeof u=="function"?u:Kt(+u),l):r},l.padRadius=function(u){return arguments.length?(n=u==null?null:typeof u=="function"?u:Kt(+u),l):n},l.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:Kt(+u),l):i},l.endAngle=function(u){return arguments.length?(o=typeof u=="function"?u:Kt(+u),l):o},l.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:Kt(+u),l):a},l.context=function(u){return arguments.length?(s=u??null,l):s},l}function wu(t){this._context=t}wu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Hr(t){return new wu(t)}function ea(){this._=null}function Qe(t){t.U=t.C=t.L=t.R=t.P=t.N=null}ea.prototype={constructor:ea,insert:function(t,e){var r,n,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;r=t}else this._?(t=bu(this._),e.P=null,e.N=t,t.P=t.L=e,r=t):(e.P=e.N=null,this._=e,r=null);for(e.L=e.R=null,e.U=r,e.C=!0,t=e;r&&r.C;)n=r.U,r===n.L?(i=n.R,i&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.R&&(Fr(this,r),t=r,r=t.U),r.C=!1,n.C=!0,$r(this,n))):(i=n.L,i&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.L&&($r(this,r),t=r,r=t.U),r.C=!1,n.C=!0,Fr(this,n))),r=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e=t.U,r,n=t.L,i=t.R,o,a;if(n?i?o=bu(i):o=n:o=i,e?e.L===t?e.L=o:e.R=o:this._=o,n&&i?(a=o.C,o.C=t.C,o.L=n,n.U=o,o!==i?(e=o.U,o.U=t.U,t=o.R,e.L=t,o.R=i,i.U=o):(o.U=e,e=o,t=o.R)):(a=t.C,t=o),t&&(t.U=e),!a){if(t&&t.C){t.C=!1;return}do{if(t===this._)break;if(t===e.L){if(r=e.R,r.C&&(r.C=!1,e.C=!0,Fr(this,e),r=e.R),r.L&&r.L.C||r.R&&r.R.C){(!r.R||!r.R.C)&&(r.L.C=!1,r.C=!0,$r(this,r),r=e.R),r.C=e.C,e.C=r.R.C=!1,Fr(this,e),t=this._;break}}else if(r=e.L,r.C&&(r.C=!1,e.C=!0,$r(this,e),r=e.L),r.L&&r.L.C||r.R&&r.R.C){(!r.L||!r.L.C)&&(r.R.C=!1,r.C=!0,Fr(this,r),r=e.L),r.C=e.C,e.C=r.L.C=!1,$r(this,e),t=this._;break}r.C=!0,t=e,e=e.U}while(!t.C);t&&(t.C=!1)}}};function Fr(t,e){var r=e,n=e.R,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.R=n.L,r.R&&(r.R.U=r),n.L=r}function $r(t,e){var r=e,n=e.L,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.L=n.R,r.L&&(r.L.U=r),n.R=r}function bu(t){for(;t.L;)t=t.L;return t}var ra=ea;function Ze(t,e,r,n){var i=[null,null],o=ot.push(i)-1;return i.left=t,i.right=e,r&&Gr(i,t,e,r),n&&Gr(i,e,t,n),dt[t.index].halfedges.push(o),dt[e.index].halfedges.push(o),i}function je(t,e,r){var n=[e,r];return n.left=t,n}function Gr(t,e,r,n){!t[0]&&!t[1]?(t[0]=n,t.left=e,t.right=r):t.left===r?t[1]=n:t[0]=n}function cd(t,e,r,n,i){var o=t[0],a=t[1],s=o[0],l=o[1],u=a[0],f=a[1],c=0,h=1,m=u-s,g=f-l,p;if(p=e-s,!(!m&&p>0)){if(p/=m,m<0){if(p<c)return;p<h&&(h=p)}else if(m>0){if(p>h)return;p>c&&(c=p)}if(p=n-s,!(!m&&p<0)){if(p/=m,m<0){if(p>h)return;p>c&&(c=p)}else if(m>0){if(p<c)return;p<h&&(h=p)}if(p=r-l,!(!g&&p>0)){if(p/=g,g<0){if(p<c)return;p<h&&(h=p)}else if(g>0){if(p>h)return;p>c&&(c=p)}if(p=i-l,!(!g&&p<0)){if(p/=g,g<0){if(p>h)return;p>c&&(c=p)}else if(g>0){if(p<c)return;p<h&&(h=p)}return!(c>0)&&!(h<1)||(c>0&&(t[0]=[s+c*m,l+c*g]),h<1&&(t[1]=[s+h*m,l+h*g])),!0}}}}}function hd(t,e,r,n,i){var o=t[1];if(o)return!0;var a=t[0],s=t.left,l=t.right,u=s[0],f=s[1],c=l[0],h=l[1],m=(u+c)/2,g=(f+h)/2,p,y;if(h===f){if(m<e||m>=n)return;if(u>c){if(!a)a=[m,r];else if(a[1]>=i)return;o=[m,i]}else{if(!a)a=[m,i];else if(a[1]<r)return;o=[m,r]}}else if(p=(u-c)/(h-f),y=g-p*m,p<-1||p>1)if(u>c){if(!a)a=[(r-y)/p,r];else if(a[1]>=i)return;o=[(i-y)/p,i]}else{if(!a)a=[(i-y)/p,i];else if(a[1]<r)return;o=[(r-y)/p,r]}else if(f<h){if(!a)a=[e,p*e+y];else if(a[0]>=n)return;o=[n,p*n+y]}else{if(!a)a=[n,p*n+y];else if(a[0]<e)return;o=[e,p*e+y]}return t[0]=a,t[1]=o,!0}function ku(t,e,r,n){for(var i=ot.length,o;i--;)(!hd(o=ot[i],t,e,r,n)||!cd(o,t,e,r,n)||!(Math.abs(o[0][0]-o[1][0])>V||Math.abs(o[0][1]-o[1][1])>V))&&delete ot[i]}function Mu(t){return dt[t.index]={site:t,halfedges:[]}}function pd(t,e){var r=t.site,n=e.left,i=e.right;return r===i&&(i=n,n=r),i?Math.atan2(i[1]-n[1],i[0]-n[0]):(r===n?(n=e[1],i=e[0]):(n=e[0],i=e[1]),Math.atan2(n[0]-i[0],i[1]-n[1]))}function na(t,e){return e[+(e.left!==t.site)]}function md(t,e){return e[+(e.left===t.site)]}function _u(){for(var t=0,e=dt.length,r,n,i,o;t<e;++t)if((r=dt[t])&&(o=(n=r.halfedges).length)){var a=new Array(o),s=new Array(o);for(i=0;i<o;++i)a[i]=i,s[i]=pd(r,ot[n[i]]);for(a.sort(function(l,u){return s[u]-s[l]}),i=0;i<o;++i)s[i]=n[a[i]];for(i=0;i<o;++i)n[i]=s[i]}}function Su(t,e,r,n){var i=dt.length,o,a,s,l,u,f,c,h,m,g,p,y,b=!0;for(o=0;o<i;++o)if(a=dt[o]){for(s=a.site,u=a.halfedges,l=u.length;l--;)ot[u[l]]||u.splice(l,1);for(l=0,f=u.length;l<f;)g=md(a,ot[u[l]]),p=g[0],y=g[1],c=na(a,ot[u[++l%f]]),h=c[0],m=c[1],(Math.abs(p-h)>V||Math.abs(y-m)>V)&&(u.splice(l,0,ot.push(je(s,g,Math.abs(p-t)<V&&n-y>V?[t,Math.abs(h-t)<V?m:n]:Math.abs(y-n)<V&&r-p>V?[Math.abs(m-n)<V?h:r,n]:Math.abs(p-r)<V&&y-e>V?[r,Math.abs(h-r)<V?m:e]:Math.abs(y-e)<V&&p-t>V?[Math.abs(m-e)<V?h:t,e]:null))-1),++f);f&&(b=!1)}if(b){var w,v,S,R=1/0;for(o=0,b=null;o<i;++o)(a=dt[o])&&(s=a.site,w=s[0]-t,v=s[1]-e,S=w*w+v*v,S<R&&(R=S,b=a));if(b){var E=[t,e],q=[t,n],G=[r,n],H=[r,e];b.halfedges.push(ot.push(je(s=b.site,E,q))-1,ot.push(je(s,q,G))-1,ot.push(je(s,G,H))-1,ot.push(je(s,H,E))-1)}}for(o=0;o<i;++o)(a=dt[o])&&(a.halfedges.length||delete dt[o])}var Au=[],gi;function dd(){Qe(this),this.x=this.y=this.arc=this.site=this.cy=null}function Se(t){var e=t.P,r=t.N;if(!(!e||!r)){var n=e.site,i=t.site,o=r.site;if(n!==o){var a=i[0],s=i[1],l=n[0]-a,u=n[1]-s,f=o[0]-a,c=o[1]-s,h=2*(l*c-u*f);if(!(h>=-zu)){var m=l*l+u*u,g=f*f+c*c,p=(c*m-u*g)/h,y=(l*g-f*m)/h,b=Au.pop()||new dd;b.arc=t,b.site=i,b.x=p+a,b.y=(b.cy=y+s)+Math.sqrt(p*p+y*y),t.circle=b;for(var w=null,v=Je._;v;)if(b.y<v.y||b.y===v.y&&b.x<=v.x)if(v.L)v=v.L;else{w=v.P;break}else if(v.R)v=v.R;else{w=v;break}Je.insert(w,b),w||(gi=b)}}}}function Ae(t){var e=t.circle;e&&(e.P||(gi=e.N),Je.remove(e),Au.push(e),Qe(e),t.circle=null)}var Ru=[];function gd(){Qe(this),this.edge=this.site=this.circle=null}function Cu(t){var e=Ru.pop()||new gd;return e.site=t,e}function ia(t){Ae(t),ze.remove(t),Ru.push(t),Qe(t)}function Nu(t){var e=t.circle,r=e.x,n=e.cy,i=[r,n],o=t.P,a=t.N,s=[t];ia(t);for(var l=o;l.circle&&Math.abs(r-l.circle.x)<V&&Math.abs(n-l.circle.cy)<V;)o=l.P,s.unshift(l),ia(l),l=o;s.unshift(l),Ae(l);for(var u=a;u.circle&&Math.abs(r-u.circle.x)<V&&Math.abs(n-u.circle.cy)<V;)a=u.N,s.push(u),ia(u),u=a;s.push(u),Ae(u);var f=s.length,c;for(c=1;c<f;++c)u=s[c],l=s[c-1],Gr(u.edge,l.site,u.site,i);l=s[0],u=s[f-1],u.edge=Ze(l.site,u.site,null,i),Se(l),Se(u)}function Pu(t){for(var e=t[0],r=t[1],n,i,o,a,s=ze._;s;)if(o=Eu(s,r)-e,o>V)s=s.L;else if(a=e-yd(s,r),a>V){if(!s.R){n=s;break}s=s.R}else{o>-V?(n=s.P,i=s):a>-V?(n=s,i=s.N):n=i=s;break}Mu(t);var l=Cu(t);if(ze.insert(n,l),!(!n&&!i)){if(n===i){Ae(n),i=Cu(n.site),ze.insert(l,i),l.edge=i.edge=Ze(n.site,l.site),Se(n),Se(i);return}if(!i){l.edge=Ze(n.site,l.site);return}Ae(n),Ae(i);var u=n.site,f=u[0],c=u[1],h=t[0]-f,m=t[1]-c,g=i.site,p=g[0]-f,y=g[1]-c,b=2*(h*y-m*p),w=h*h+m*m,v=p*p+y*y,S=[(y*w-m*v)/b+f,(h*v-p*w)/b+c];Gr(i.edge,u,g,S),l.edge=Ze(u,t,null,S),i.edge=Ze(t,g,null,S),Se(n),Se(i)}}function Eu(t,e){var r=t.site,n=r[0],i=r[1],o=i-e;if(!o)return n;var a=t.P;if(!a)return-1/0;r=a.site;var s=r[0],l=r[1],u=l-e;if(!u)return s;var f=s-n,c=1/o-1/u,h=f/u;return c?(-h+Math.sqrt(h*h-2*c*(f*f/(-2*u)-l+u/2+i-o/2)))/c+n:(n+s)/2}function yd(t,e){var r=t.N;if(r)return Eu(r,e);var n=t.site;return n[1]===e?n[0]:1/0}var V=1e-6,zu=1e-12,ze,dt,Je,ot;function xd(t,e,r){return(t[0]-r[0])*(e[1]-t[1])-(t[0]-e[0])*(r[1]-t[1])}function vd(t,e){return e[1]-t[1]||e[0]-t[0]}function yi(t,e){var r=t.sort(vd).pop(),n,i,o;for(ot=[],dt=new Array(t.length),ze=new ra,Je=new ra;;)if(o=gi,r&&(!o||r[1]<o.y||r[1]===o.y&&r[0]<o.x))(r[0]!==n||r[1]!==i)&&(Pu(r),n=r[0],i=r[1]),r=t.pop();else if(o)Nu(o.arc);else break;if(_u(),e){var a=+e[0][0],s=+e[0][1],l=+e[1][0],u=+e[1][1];ku(a,s,l,u),Su(a,s,l,u)}this.edges=ot,this.cells=dt,ze=Je=ot=dt=null}yi.prototype={constructor:yi,polygons:function(){var t=this.edges;return this.cells.map(function(e){var r=e.halfedges.map(function(n){return na(e,t[n])});return r.data=e.site.data,r})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(r,n){if(!!(s=(o=r.halfedges).length))for(var i=r.site,o,a=-1,s,l,u=e[o[s-1]],f=u.left===i?u.right:u.left;++a<s;)l=f,u=e[o[a]],f=u.left===i?u.right:u.left,l&&f&&n<l.index&&n<f.index&&xd(i,l,f)<0&&t.push([i.data,l.data,f.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,r){for(var n=this,i,o=n._found||0,a=n.cells.length,s;!(s=n.cells[o]);)if(++o>=a)return null;var l=t-s.site[0],u=e-s.site[1],f=l*l+u*u;do s=n.cells[i=o],o=null,s.halfedges.forEach(function(c){var h=n.edges[c],m=h.left;if(!((m===s.site||!m)&&!(m=h.right))){var g=t-m[0],p=e-m[1],y=g*g+p*p;y<f&&(f=y,o=m.index)}});while(o!==null);return n._found=i,r==null||f<=r*r?s.site:null}};function Vr(t){return function(){return t}}function oa(t,e,r){this.target=t,this.type=e,this.transform=r}function qt(t,e,r){this.k=t,this.x=e,this.y=r}qt.prototype={constructor:qt,scale:function(t){return t===1?this:new qt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new qt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Xr=new qt(1,0,0);aa.prototype=qt.prototype;function aa(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Xr;return t.__zoom}function xi(){N.stopImmediatePropagation()}function tr(){N.preventDefault(),N.stopImmediatePropagation()}function wd(){return!N.ctrlKey&&!N.button}function bd(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Ou(){return this.__zoom||Xr}function kd(){return-N.deltaY*(N.deltaMode===1?.05:N.deltaMode?1:.002)}function Md(){return navigator.maxTouchPoints||"ontouchstart"in this}function _d(t,e,r){var n=t.invertX(e[0][0])-r[0][0],i=t.invertX(e[1][0])-r[1][0],o=t.invertY(e[0][1])-r[0][1],a=t.invertY(e[1][1])-r[1][1];return t.translate(i>n?(n+i)/2:Math.min(0,n)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function er(){var t=wd,e=bd,r=_d,n=kd,i=Md,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,l=No,u=wr("start","zoom","end"),f,c,h=500,m=150,g=0;function p(d){d.property("__zoom",Ou).on("wheel.zoom",E).on("mousedown.zoom",q).on("dblclick.zoom",G).filter(i).on("touchstart.zoom",H).on("touchmove.zoom",P).on("touchend.zoom touchcancel.zoom",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(d,x,M){var A=d.selection?d.selection():d;A.property("__zoom",Ou),d!==A?v(d,x,M):A.interrupt().each(function(){S(this,arguments).start().zoom(null,typeof x=="function"?x.apply(this,arguments):x).end()})},p.scaleBy=function(d,x,M){p.scaleTo(d,function(){var A=this.__zoom.k,C=typeof x=="function"?x.apply(this,arguments):x;return A*C},M)},p.scaleTo=function(d,x,M){p.transform(d,function(){var A=e.apply(this,arguments),C=this.__zoom,T=M==null?w(A):typeof M=="function"?M.apply(this,arguments):M,D=C.invert(T),$=typeof x=="function"?x.apply(this,arguments):x;return r(b(y(C,$),T,D),A,a)},M)},p.translateBy=function(d,x,M){p.transform(d,function(){return r(this.__zoom.translate(typeof x=="function"?x.apply(this,arguments):x,typeof M=="function"?M.apply(this,arguments):M),e.apply(this,arguments),a)})},p.translateTo=function(d,x,M,A){p.transform(d,function(){var C=e.apply(this,arguments),T=this.__zoom,D=A==null?w(C):typeof A=="function"?A.apply(this,arguments):A;return r(Xr.translate(D[0],D[1]).scale(T.k).translate(typeof x=="function"?-x.apply(this,arguments):-x,typeof M=="function"?-M.apply(this,arguments):-M),C,a)},A)};function y(d,x){return x=Math.max(o[0],Math.min(o[1],x)),x===d.k?d:new qt(x,d.x,d.y)}function b(d,x,M){var A=x[0]-M[0]*d.k,C=x[1]-M[1]*d.k;return A===d.x&&C===d.y?d:new qt(d.k,A,C)}function w(d){return[(+d[0][0]+ +d[1][0])/2,(+d[0][1]+ +d[1][1])/2]}function v(d,x,M){d.on("start.zoom",function(){S(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).end()}).tween("zoom",function(){var A=this,C=arguments,T=S(A,C),D=e.apply(A,C),$=M==null?w(D):typeof M=="function"?M.apply(A,C):M,J=Math.max(D[1][0]-D[0][0],D[1][1]-D[0][1]),xt=A.__zoom,z=typeof x=="function"?x.apply(A,C):x,O=l(xt.invert($).concat(J/xt.k),z.invert($).concat(J/z.k));return function(I){if(I===1)I=z;else{var U=O(I),K=J/U[2];I=new qt(K,$[0]-U[0]*K,$[1]-U[1]*K)}T.zoom(null,I)}})}function S(d,x,M){return!M&&d.__zooming||new R(d,x)}function R(d,x){this.that=d,this.args=x,this.active=0,this.extent=e.apply(d,x),this.taps=0}R.prototype={start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(d,x){return this.mouse&&d!=="mouse"&&(this.mouse[1]=x.invert(this.mouse[0])),this.touch0&&d!=="touch"&&(this.touch0[1]=x.invert(this.touch0[0])),this.touch1&&d!=="touch"&&(this.touch1[1]=x.invert(this.touch1[0])),this.that.__zoom=x,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(d){po(new oa(p,d,this.that.__zoom),u.apply,u,[d,this.that,this.args])}};function E(){if(!t.apply(this,arguments))return;var d=S(this,arguments),x=this.__zoom,M=Math.max(o[0],Math.min(o[1],x.k*Math.pow(2,n.apply(this,arguments)))),A=Fe(this);if(d.wheel)(d.mouse[0][0]!==A[0]||d.mouse[0][1]!==A[1])&&(d.mouse[1]=x.invert(d.mouse[0]=A)),clearTimeout(d.wheel);else{if(x.k===M)return;d.mouse=[A,x.invert(A)],re(this),d.start()}tr(),d.wheel=setTimeout(C,m),d.zoom("mouse",r(b(y(x,M),d.mouse[0],d.mouse[1]),d.extent,a));function C(){d.wheel=null,d.end()}}function q(){if(c||!t.apply(this,arguments))return;var d=S(this,arguments,!0),x=W(N.view).on("mousemove.zoom",T,!0).on("mouseup.zoom",D,!0),M=Fe(this),A=N.clientX,C=N.clientY;go(N.view),xi(),d.mouse=[M,this.__zoom.invert(M)],re(this),d.start();function T(){if(tr(),!d.moved){var $=N.clientX-A,J=N.clientY-C;d.moved=$*$+J*J>g}d.zoom("mouse",r(b(d.that.__zoom,d.mouse[0]=Fe(d.that),d.mouse[1]),d.extent,a))}function D(){x.on("mousemove.zoom mouseup.zoom",null),yo(N.view,d.moved),tr(),d.end()}}function G(){if(!!t.apply(this,arguments)){var d=this.__zoom,x=Fe(this),M=d.invert(x),A=d.k*(N.shiftKey?.5:2),C=r(b(y(d,A),x,M),e.apply(this,arguments),a);tr(),s>0?W(this).transition().duration(s).call(v,C,x):W(this).call(p.transform,C)}}function H(){if(!!t.apply(this,arguments)){var d=N.touches,x=d.length,M=S(this,arguments,N.changedTouches.length===x),A,C,T,D;for(xi(),C=0;C<x;++C)T=d[C],D=Hn(this,d,T.identifier),D=[D,this.__zoom.invert(D),T.identifier],M.touch0?!M.touch1&&M.touch0[2]!==D[2]&&(M.touch1=D,M.taps=0):(M.touch0=D,A=!0,M.taps=1+!!f);f&&(f=clearTimeout(f)),A&&(M.taps<2&&(f=setTimeout(function(){f=null},h)),re(this),M.start())}}function P(){if(!!this.__zooming){var d=S(this,arguments),x=N.changedTouches,M=x.length,A,C,T,D;for(tr(),f&&(f=clearTimeout(f)),d.taps=0,A=0;A<M;++A)C=x[A],T=Hn(this,x,C.identifier),d.touch0&&d.touch0[2]===C.identifier?d.touch0[0]=T:d.touch1&&d.touch1[2]===C.identifier&&(d.touch1[0]=T);if(C=d.that.__zoom,d.touch1){var $=d.touch0[0],J=d.touch0[1],xt=d.touch1[0],z=d.touch1[1],O=(O=xt[0]-$[0])*O+(O=xt[1]-$[1])*O,I=(I=z[0]-J[0])*I+(I=z[1]-J[1])*I;C=y(C,Math.sqrt(O/I)),T=[($[0]+xt[0])/2,($[1]+xt[1])/2],D=[(J[0]+z[0])/2,(J[1]+z[1])/2]}else if(d.touch0)T=d.touch0[0],D=d.touch0[1];else return;d.zoom("touch",r(b(C,T,D),d.extent,a))}}function k(){if(!!this.__zooming){var d=S(this,arguments),x=N.changedTouches,M=x.length,A,C;for(xi(),c&&clearTimeout(c),c=setTimeout(function(){c=null},h),A=0;A<M;++A)C=x[A],d.touch0&&d.touch0[2]===C.identifier?delete d.touch0:d.touch1&&d.touch1[2]===C.identifier&&delete d.touch1;if(d.touch1&&!d.touch0&&(d.touch0=d.touch1,delete d.touch1),d.touch0)d.touch0[1]=this.__zoom.invert(d.touch0[0]);else if(d.end(),d.taps===2){var T=W(this).on("dblclick.zoom");T&&T.apply(this,arguments)}}}return p.wheelDelta=function(d){return arguments.length?(n=typeof d=="function"?d:Vr(+d),p):n},p.filter=function(d){return arguments.length?(t=typeof d=="function"?d:Vr(!!d),p):t},p.touchable=function(d){return arguments.length?(i=typeof d=="function"?d:Vr(!!d),p):i},p.extent=function(d){return arguments.length?(e=typeof d=="function"?d:Vr([[+d[0][0],+d[0][1]],[+d[1][0],+d[1][1]]]),p):e},p.scaleExtent=function(d){return arguments.length?(o[0]=+d[0],o[1]=+d[1],p):[o[0],o[1]]},p.translateExtent=function(d){return arguments.length?(a[0][0]=+d[0][0],a[1][0]=+d[1][0],a[0][1]=+d[0][1],a[1][1]=+d[1][1],p):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},p.constrain=function(d){return arguments.length?(r=d,p):r},p.duration=function(d){return arguments.length?(s=+d,p):s},p.interpolate=function(d){return arguments.length?(l=d,p):l},p.on=function(){var d=u.on.apply(u,arguments);return d===u?p:d},p.clickDistance=function(d){return arguments.length?(g=(d=+d)*d,p):Math.sqrt(g)},p}function Iu(t){return typeof t=="function"}function sa(t){return Iu(t)?t:()=>t}function B(t,e){return t!=null?sa(t):e}function ut(t,e){return Iu(t)?t(e):t}function Sd(t){(typeof t.property=="function"||t.property!=null||t.property===null)&&t.selection.style(t.key,t.property)}function Ad(t){(typeof t.property=="function"||t.property!=null||t.property===null)&&t.selection.attr(t.key,t.property)}function oe(t){for(let e of t.selectionKeys){let r=t.selectionMap.get(e);if(r==null){console.error("undefined selection:",e,"in call to applyPropertyPolicy");continue}let n=t.policy.styleRuleMap.get(e);if(n!=null)for(let o of n)Sd(Object.assign({selection:r},o));let i=t.policy.attributeRuleMap.get(e);if(i!=null)for(let o of i)Ad(Object.assign({selection:r},o))}}var nt=class{constructor(e){this.chart=e.chart,this.annotations=e.annotations,this.selector=e.selector,this.selection=e.selection,this.selectionMap=new Map,this.selectionMap.set("group",this.selection),this.initializePolicy={attributeRuleMap:new Map,styleRuleMap:new Map},this.zoomPolicy={attributeRuleMap:new Map,styleRuleMap:new Map},this.id=r=>r.a.id,this.x=B(e.x,r=>r.c.xScale(r.a.start)),this.row=B(e.row,r=>r.c.layout.row(r)),this.y=B(e.y,r=>this.row(r)*r.c.rowHeight+2),this.width=B(e.width,r=>r.c.xScale(r.a.end)-r.c.xScale(r.a.start)),this.height=B(e.height,r=>r.c.rowHeight-4)}get selectionKeys(){return Array.from(this.selectionMap.keys())}initialize(){oe({selectionKeys:this.selectionKeys,selectionMap:this.selectionMap,policy:this.initializePolicy,context:"initialize"}),this.zoom()}zoom(){oe({selectionKeys:this.selectionKeys,selectionMap:this.selectionMap,policy:this.zoomPolicy,context:"zoom"})}};var j;(function(t){t.Bottom="bottom",t.Top="top",t.Left="left",t.Right="right"})(j||(j={}));function zd(t,e){if(e==j.Bottom)return uo(t);if(e==j.Top)return so(t);if(e==j.Left)return fo(t);if(e==j.Right)return lo(t);throw"Invalid AxisType "+e+" on getAxis() call"}var Ce=class extends nt{constructor(e){super(e);this.domain=()=>[0,0],this.range=()=>[0,0],this.axisType=()=>j.Top,this.ticks=B(e.ticks,()=>5),this.tickSizeOuter=B(e.tickSizeOuter,()=>6),this.tickSizeInner=B(e.tickSizeInner,()=>6),this.tickPadding=B(e.tickPadding,()=>3),this.initializePolicy.styleRuleMap.set("axis-line",[{key:"stroke-width",property:e.strokeWidth},{key:"stroke-opacity",property:e.strokeOpacity},{key:"stroke",property:e.strokeColor},{key:"stroke-dasharray",property:e.strokeDashArray},{key:"stroke-dashoffset",property:e.strokeDashOffset},{key:"fill",property:e.fillColor},{key:"fill-opacity",property:e.fillOpacity}]),this.zoomPolicy.styleRuleMap.set("ticks",[{key:"stroke-width",property:e.tickStrokeWidth},{key:"stroke-opacity",property:e.tickStrokeOpacity},{key:"stroke",property:e.tickStrokeColor},{key:"fill",property:e.tickFillColor},{key:"fill-opacity",property:e.tickFillOpacity}]),this.zoomPolicy.styleRuleMap.set("tick-labels",[{key:"stroke-width",property:e.labelStrokeWidth},{key:"stroke-opacity",property:e.labelStrokeOpacity},{key:"stroke",property:e.labelStrokeColor},{key:"fill",property:e.labelFillColor},{key:"fill-opacity",property:e.labelFillOpacity},{key:"font-family",property:e.fontFamily},{key:"text-anchor",property:e.textAnchor},{key:"font-size",property:e.fontSize},{key:"font-weight",property:e.fontWeight},{key:"font-style",property:e.fontStyle}])}initialize(){this.zoom(),oe({selectionKeys:this.selectionKeys,selectionMap:this.selectionMap,policy:this.initializePolicy,context:"initialize"})}zoom(){let e=this.selectionMap.get("group");if(e==null)throw console.error("group selection undefined in call to zoom(), unable to build axis"),"group selection undefined";e.each((r,n,i)=>{let o=zd(this.buildScale(r),this.axisType(r)).ticks(this.ticks(r)).tickSizeInner(this.tickSizeInner(r)).tickSizeOuter(this.tickSizeOuter(r)).tickPadding(this.tickPadding(r));W(i[n]).call(o)}),this.selectionMap.set("axis-line",this.selection.selectAll("path.domain")),this.selectionMap.set("ticks",this.selection.selectAll("g.tick line")),this.selectionMap.set("tick-labels",this.selection.selectAll("g.tick text")),super.zoom()}};var vi=new Map;function Tu(t){return t.annotations!=null&&t.selector!=null&&t.chart!=null}var wi=new Map,Re="|";function rr(t){let e=t.datum(),r=t.attr("class");return`${e.a.id}${Re}${r}${Re}${e.c.id}`}function Du(t){t.binding.merge.each((e,r,n)=>{vi.set(e.a.id,e.a);let i=W(n[r]),o=rr(i);wi.set(o,i)})}function Lu(t){for(let e of t)wi.delete(e)}function Cd(t={}){let r=Array.from(wi.keys()).map(n=>n.split(Re));if(t.selector!=null&&(r=r.filter(n=>n[1]==t.selector)),t.chart!=null&&(r=r.filter(n=>n[2]==t.chart.id)),t.annotations!=null){let n=t.annotations.map(i=>i.id);r=r.filter(i=>{for(let o of n)if(o==i[0])return!0;return!1})}return r.map(n=>`${n[0]}${Re}${n[1]}${Re}${n[2]}`)}function zt(t={}){let e=[];if(Tu(t))for(let n of t.annotations)e.push(`${n.id}${Re}${t.selector}${Re}${t.chart.id}`);else e=Cd(t);let r=[];for(let n of e){let i=wi.get(n);i==null?console.error(`glyphMap returned undefined with key ${n}`):r.push(i)}return r}var ae;(function(t){t.Viewport="viewport",t.Overflow="overflow",t.Defs="defs"})(ae||(ae={}));function Y(t){let e;t.target==ae.Viewport?e=t.chart.viewportSelection:t.target==ae.Overflow?e=t.chart.overflowViewportSelection:t.target==ae.Defs?e=t.chart.defSelection:e=t.target||t.chart.viewportSelection;let r=`${t.selector}-group`,n,i=e.selectAll(`g.${r}`);i.node()!=null?n=W(i.node()):n=i.data([r],c=>c).enter().append("g").attr("class",c=>c);let o=t.annotations.map(c=>({a:c,c:t.chart})),a=n.selectAll(`${t.elementType}.${t.selector}`).data(o,c=>c.a.id),s=a.enter().append(t.elementType).attr("class",t.selector),l=s.merge(a),u=a.exit();a.exit().remove();let f={g:n,enter:s,merge:l,exit:u};return Du({binding:f,selector:t.selector}),f}var Bu=class extends Ce{constructor(e){super(e);e.fixed?(this.domain=B(e.domain,r=>[r.c.xScale.invert(0),r.c.xScale.invert(r.c.viewportWidthPx-1)]),this.range=B(e.range,r=>[0,r.c.viewportWidthPx-1])):(this.domain=B(e.domain,r=>[r.a.start,r.a.start+(r.a.end-r.a.start)]),this.range=B(e.range,r=>[r.c.xScale(r.a.start),r.c.xScale(r.a.start+(r.a.end-r.a.start))])),this.axisType=B(e.axisType,()=>j.Bottom),this.initializePolicy.attributeRuleMap.set("group",[{key:"id",property:r=>r.a.id},{key:"transform",property:r=>`translate(0, ${this.y(r)})`}])}buildScale(e){return vt().domain(this.domain(e)).range(this.range(e))}};function Wr(t){let e=t.selector||F("soda-horizontal-axis-glyph"),r=Y(Object.assign(Object.assign({},t),{selector:e,elementType:"g"})),n=new Bu(Object.assign({selector:e,selection:r.merge},t));return t.chart.addGlyphModifier(n),r.g}var bi=class extends nt{constructor(e){super(e);this.initializePolicy.attributeRuleMap.set("group",[{key:"id",property:this.id},{key:"y",property:this.y},{key:"height",property:this.height},{key:"rx",property:e.rx},{key:"ry",property:e.ry}]),this.initializePolicy.styleRuleMap.set("group",[{key:"stroke-width",property:e.strokeWidth},{key:"stroke-opacity",property:e.strokeOpacity},{key:"stroke",property:e.strokeColor},{key:"stroke-dasharray",property:e.strokeDashArray},{key:"stroke-dashoffset",property:e.strokeDashOffset},{key:"fill",property:e.fillColor},{key:"fill-opacity",property:e.fillOpacity}]),this.zoomPolicy.attributeRuleMap.set("group",[{key:"x",property:this.x},{key:"width",property:this.width}])}};function It(t){let e=t.selector||F("soda-rect-glyph"),r=Y(Object.assign(Object.assign({},t),{selector:e,elementType:"rect"})),n=new bi(Object.assign(Object.assign({},t),{selector:e,selection:r.merge}));return t.chart.addGlyphModifier(n),r.g}function Ur(t,e){let r=rr(t),n=e.get(r);return n==null&&(n=[],e.set(r,n)),n}var qu=new Map,Hu=new Map;function Fu(t){return Ur(t,qu)}function $u(t){return Ur(t,Hu)}function Gu(t){for(let e of t)qu.delete(e),Hu.delete(e)}function Yr(t){let e=zt(t);if(e==null){console.warn("Glyph query failed when attempting to map click behavior");return}for(let r of e)Rd(r,t)}function Rd(t,e){Fu(t).push(e.mouseover),$u(t).push(e.mouseout),t.on("mouseover",()=>Nd(t)).on("mouseout",()=>Pd(t))}function Nd(t){let e=t.datum(),r=Fu(t);for(let n of r)n(t,e)}function Pd(t){let e=t.datum(),r=$u(t);for(let n of r)n(t,e)}var Vu=new Map;function Xu(t){return Ur(t,Vu)}function Wu(t){for(let e of t)Vu.delete(e)}function ki(t){let e=zt(t);if(e==null){console.warn("Glyph query failed when attempting to map click behavior");return}for(let r of e)Ed(r,t)}function Ed(t,e){Xu(t).push(e.click),t.on("click",()=>Od(t))}function Od(t){let e=t.datum(),r=Xu(t);for(let n of r)n(t,e)}function la(t){let e=zt(t);if(e!=null){Array.isArray(e)||(e=[e]),Id(e);let r=e.map(n=>rr(n));Lu(r),Gu(r),Wu(r)}}function Id(t){for(let e of t){let r=e.datum().a.id;vi.delete(r),e.remove()}}var Uu={row:()=>0,rowCount:1};function Td(t,e,r=0){return t.start-r<=e.end&&t.end+r>=e.start}var nr=class{constructor(e,r=0,n=Td){this.idMap=new Map,this.edges=new Map;for(let i of e){this.idMap.set(i.id,i),this.edges.set(i.id,[]);for(let o of e)i!=o&&n(i,o,r)&&this.edges.set(i.id,this.edges.get(i.id).concat(o.id))}}getVertices(){return Array.from(this.edges.keys())}getEdges(e){let r=this.edges.get(e);return r==null&&(r=[]),r}getAnnotationFromId(e){let r=this.idMap.get(e);if(r==null)throw`No annotation with id: ${e} in annotation graph`;return r}};function Dd(t,e){t.sort((r,n)=>e.getAnnotationFromId(r).start>e.getAnnotationFromId(n).start?1:-1)}function se(t,e=0){let r=new nr(t,e),n=new Map,i=0,o=r.getVertices();Dd(o,r);let a=new Map;a.set(0,[o[0]]),n.set(o[0],0);for(let l of o.slice(1)){let u=r.getEdges(l),f=0;for(let h=0;h<=i;h++){let m=a.get(h),g=m[m.length-1];if(u.indexOf(g)>-1)f++;else break}let c=a.get(f);c==null?(a.set(f,[l]),i++):c.push(l),n.set(l,f)}return{rowMap:n,row:function(l){return this.rowMap.get(l.a.id)||0},rowCount:i+1}}var Ne=class{constructor(e,r,n){this.k=e,this.x=r,this.y=n}scale(e){return e===1?this:new Ne(this.k*e,this.x,this.y)}translate(e,r){return e===0&&r===0?this:new Ne(this.k,this.x+this.k*e,this.y+this.k*r)}apply(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]}applyX(e){return e*this.k+this.x}applyY(e){return e*this.k+this.y}invert(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]}invertX(e){return(e-this.x)/this.k}invertY(e){return(e-this.y)/this.k}rescaleX(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))}rescaleY(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))}toString(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};function Kr(t){return t==null?t:typeof t=="number"?`${t}px`:t}function Mi(t){let e=t.node();if(e==null)throw"null selection on call to getSelectionDomRect()";return e.getBoundingClientRect()}var Ht=class{constructor(e){this.viewportWidthPx=0,this.viewportHeightPx=0,this.initialDomain=[0,1],this.yScale=function(n){return n*this.rowHeight},this.layout=Uu,this.rowOpacity=1,this.observers=[],this.glyphModifiers=[],this.id=e.id||F("soda-chart"),this.selector=e.selector,this.containerSelection=W(this.selector),this.divSelection=this.containerSelection.append("div"),this.padSelection=this.divSelection.append("svg"),this.padSelection.attr("xmlns","http://www.w3.org/2000/svg"),this._transform=new Ne(1,0,0),this.padSelection.node().__zoom=this._transform,this.highlightSelection=this.padSelection.append("g").attr("class","highlight"),this.viewportSelection=this.padSelection.append("svg").attr("overflow","hidden"),this.overflowViewportSelection=this.padSelection.append("svg").attr("overflow","visible"),this.defSelection=this.viewportSelection.append("defs"),this.rowHeight=e.rowHeight||10,this.rowCount=1,this.padSize=e.padSize!=null?e.padSize:25,this.leftPadSize=e.leftPadSize!=null?e.leftPadSize:this.padSize,this.rightPadSize=e.rightPadSize!=null?e.rightPadSize:this.padSize,this.upperPadSize=e.upperPadSize!=null?e.upperPadSize:this.padSize,this.lowerPadSize=e.lowerPadSize!=null?e.lowerPadSize:this.padSize,this.divHeight=e.divHeight,this.divWidth=e.divWidth,this.divOverflowX=e.divOverflowX||"hidden",this.divOverflowY=e.divOverflowY||"hidden",this.divOutline=e.divOutline,this.divMargin=e.divMargin,this.padSelection.attr("width","100%").attr("height",this.upperPadSize+this.lowerPadSize+this.rowHeight),this.updateViewportProperties(),this.xScale=vt(),this.initializeXScale(0,1),this.rowColors=e.rowColors,this.rowOpacity=e.rowOpacity!=null?e.rowOpacity:this.rowOpacity,this.addRowStripes();let r={chart:this,selector:"soda-default-axis",annotations:[{id:"axis",start:0,end:this.xScale.range()[1]}],y:-5,fixed:!0,target:ae.Overflow,axisType:j.Top};this.axisConfig=e.axisConfig!=null?Object.assign(Object.assign({},r),e.axisConfig):r,this.resizable=e.resizable||!1,this.resizeObserver=void 0,this.zoomable=e.zoomable||!1,this.updateLayout=e.updateLayout||this.defaultUpdateLayout,this.updateRowCount=e.updateRowCount||this.defaultUpdateRowCount,this.updateDimensions=e.updateDimensions||this.defaultUpdateDimensions,this.updateDomain=e.updateDomain||this.defaultUpdateDomain,this.draw=e.draw||this.defaultDraw,this.postRender=e.postRender||this.defaultPostRender,this.postZoom=e.postZoom||(()=>{}),this.postResize=e.postResize||(()=>{}),this.zoomConstraint=e.zoomConstraint||[1,1/0],this.domainConstraint=e.domainConstraint||(n=>n.initialDomain),this.zoomable&&this.configureZoom(),this.resizable&&this.configureResize(),e.debugShading&&(this.padSelection.append("rect").attr("width","100%").attr("height","100%").attr("fill","blue").attr("fill-opacity",.03),this.viewportSelection.append("rect").attr("width","100%").attr("height","100%").attr("fill","red").attr("fill-opacity",.03))}render(e){this.renderParams=e,this.updateLayout(e),this.updateRowCount(e),this.updateDimensions(e),this.updateDomain(e),this.draw(e),this.postRender(e)}defaultUpdateLayout(e){e.annotations!=null&&(this.layout=se(e.annotations))}defaultUpdateRowCount(e){this.rowCount=e.rowCount!=null?e.rowCount:this.layout.rowCount}defaultUpdateDimensions(e){this.updateDivHeight(),this.updatePadHeight(),this.updateViewportHeight()}defaultUpdateDomain(e){let r=this.domain;e.start!=null&&e.end!=null?r=[e.start,e.end]:e.annotations!=null&&(r=Ht.getDomainFromAnnotations(e.annotations)),this.initialDomain=r,this.domain=r}defaultDraw(e){this.addAxis(),It({chart:this,annotations:e.annotations||[],selector:"soda-rect"})}defaultPostRender(){this.applyGlyphModifiers()}addAxis(){Wr(this.axisConfig)}removeRowStripes(){this.defSelection.selectAll("pattern#row-stripes-pattern").remove(),this.viewportSelection.selectAll("rect#row-stripes-rect").remove()}addRowStripes(){if(this.rowColors==null)return;this.removeRowStripes(),this.defSelection.append("pattern").attr("id","row-stripes-pattern").attr("height",this.rowColors.length*this.rowHeight).attr("width","100%").attr("patternUnits","userSpaceOnUse").attr("preserveAspectRatio","xMinYMid meet").selectAll("rect").data(this.rowColors).enter().append("rect").style("fill",r=>r).style("fill-opacity",this.rowOpacity).attr("y",(r,n)=>n*this.rowHeight).attr("height",this.rowHeight).attr("width","100%"),this.viewportSelection.insert("rect",":first-child").attr("id","row-stripes-rect").style("fill","url(#row-stripes-pattern)").style("fill-opacity",.5).attr("height","100%").attr("width","100%")}setDivStyle(e,r){r==null?this.divSelection.style(e,null):this.divSelection.style(e,r)}setPadAttribute(e,r){r==null?this.padSelection.attr(e,null):this.padSelection.attr(e,r)}setViewportAttribute(e,r){r==null?(this.viewportSelection.attr(e,null),this.overflowViewportSelection.attr(e,null)):(this.viewportSelection.attr(e,r),this.overflowViewportSelection.attr(e,r))}set divHeight(e){e=Kr(e),this._divHeight=e,this.setDivStyle("height",e)}get divHeight(){return this.divSelection.style("height")}set divWidth(e){e=Kr(e),this._divWidth=e,this.setDivStyle("width",e)}get divWidth(){return this.divSelection.style("width")}set divOverflowY(e){this._divOverflowY=e,this.setDivStyle("overflow-y",e)}get divOverflowY(){return this.divSelection.style("overflow-y")}set divOverflowX(e){this._divOverflowX=e,this.setDivStyle("overflow-x",e)}get divOverflowX(){return this.divSelection.style("overflow-x")}set divOutline(e){this._divOutline=e,this.setDivStyle("outline",e)}get divOutline(){return this.divSelection.style("outline")}set divMargin(e){e=Kr(e),this._divMargin=e,this.setDivStyle("margin",e)}get divMargin(){return this.divSelection.style("margin")}set viewportHeight(e){e=Kr(e),this._viewportHeight=e,this.setViewportAttribute("height",e)}get viewportHeight(){return this.viewportSelection.attr("height")}set viewportWidth(e){e=Kr(e),this._viewportWidth=e,this.setViewportAttribute("width",e)}get viewportWidth(){return this.viewportSelection.attr("width")}set domain(e){this.xScale.domain(e)}get domain(){let e=this.xScale.domain();return[e[0],e[1]]}set range(e){this.xScale.range(e)}get range(){let e=this.xScale.range();return[e[0],e[1]]}updateDivHeight(){if(this._divHeight!=null)return;let e=this.rowHeight*this.rowCount+this.upperPadSize+this.lowerPadSize;this.divSelection.style("height",`${e}px`)}updateDivWidth(){this._divWidth==null&&this.divSelection.style("width","100%")}updatePadHeight(){if(this._padHeight!=null)return;let e=this.rowCount*this.rowHeight+this.upperPadSize+this.lowerPadSize;this.padSelection.attr("height",e)}updateViewportHeight(){if(this._viewportHeight!=null)return;let e=this.rowCount*this.rowHeight;this.viewportHeightPx=e,this.setViewportAttribute("height",`${e}`)}updateViewportWidth(){if(this._viewportWidth!=null)return;let e=this.calculatePadWidth()-(this.leftPadSize+this.rightPadSize);this.viewportWidthPx=e,this.setViewportAttribute("width",`${e}`)}updateViewportPosition(){this.viewportSelection.attr("x",this.leftPadSize).attr("y",this.upperPadSize),this.overflowViewportSelection.attr("x",this.leftPadSize).attr("y",this.upperPadSize)}updateViewportProperties(){this.updateViewportHeight(),this.updateViewportWidth(),this.updateViewportPosition()}updateRange(){this.range=[0,this.viewportWidthPx]}calculateContainerDimensions(){return Mi(this.containerSelection)}calculateContainerWidth(){return this.calculateContainerDimensions().width}calculateContainerHeight(){return this.calculateContainerDimensions().height}calculateDivDimensions(){return Mi(this.divSelection)}calculatePadDimensions(){return Mi(this.padSelection)}calculatePadWidth(){return this.calculatePadDimensions().width}calculatePadHeight(){return this.calculatePadDimensions().height}calculateViewportDimensions(){return Mi(this.viewportSelection)}calculateViewportWidth(){return this.calculateViewportDimensions().width}calculateViewportHeight(){return this.calculateViewportDimensions().height}configureZoom(){let e=this;this.padSelection.call(er().filter(()=>N.type==="wheel"?N.ctrlKey:!0).on("zoom",()=>e.zoom())).on("dblclick.zoom",null)}disableZoom(){this.viewportSelection.call(er().filter(()=>!1).on("zoom",()=>{})).on("dblclick.zoom",null)}set transform(e){this.padSelection.node().__zoom=e,this._transform=e}get transform(){return this._transform=this.padSelection.node().__zoom,this._transform}resetTransform(){let e=this.transform;e.x=0,e.y=0,e.k=1}addGlyphModifier(e,r=!0){r&&e.initialize();for(let[n,i]of this.glyphModifiers.entries())if(i.selector==e.selector){this.glyphModifiers[n]=e;return}this.glyphModifiers.push(e)}applyGlyphModifiers(){for(let e of this.glyphModifiers)e.zoom();this.zoomHighlight()}zoom(){let e,r;N!=null?(e=N.transform,r=N.sourceEvent):console.warn(`d3.event is undefined in zoom() call on chart: ${this.id}`);let n=this.domainConstraint(this),i=n[1]-n[0],a=(this.initialDomain[1]-this.initialDomain[0])/i,s=Math.max(this.zoomConstraint[0],a);e.k<s?e.k=s:e.k>this.zoomConstraint[1]&&(e.k=this.zoomConstraint[1]);let l;r.type=="wheel"?l=this.domainFromWheelEvent(e,r,n):r.type=="mousemove"?l=this.domainFromMousemoveEvent(e,r,n):console.error(`Unhandled event type: ${r.type} in zoom() call on chart: ${this.id}`),l!=null&&(this.domain=l),this.applyGlyphModifiers(),this.alertObservers(),this.postZoom()}domainFromWheelEvent(e,r,n){let i=this.xScale.domain(),o=i[1]-i[0],a=this.initialDomain[1]-this.initialDomain[0],s=r.offsetX-this.leftPadSize,l=this.xScale.invert(s),u=(l-i[0])/o,f=(i[1]-l)/o,c=a/e.k,h=c*u,m=c*f,g=[l-h,l+m];return g[0]=Math.max(g[0],n[0]),g[1]=Math.min(g[1],n[1]),g}domainFromMousemoveEvent(e,r,n){let i=this.xScale.domain(),o=[i[0],i[1]],a=-(this.xScale.invert(r.movementX)-i[0]);return o[0]+a<=n[0]?a=n[0]-o[0]:o[1]+a>=n[1]&&(a=n[1]-o[1]),o[0]+=a,o[1]+=a,o}initializeXScale(e,r){this.initialDomain[0]=e,this.initialDomain[1]=r,this.xScale=vt(),this.domain=[e,r],this.updateRange()}configureResize(){if(this.containerSelection==null){console.warn(`No containerSelection defined on chart: ${this.id}, can't run configureResize()`);return}this.resizeObserver=new ResizeObserver(e=>{for(let r of e)r.target==this.containerSelection.node()&&this.resize()}),this.resizeObserver.observe(this.containerSelection.node())}resize(){this.updatePadHeight(),this.updateViewportProperties(),this.updateRange(),this.applyGlyphModifiers(),this.postResize()}alertObservers(){for(let e of this.observers)e.alert(this)}get renderParams(){if(this._renderParams==null)throw console.error(`_renderParams is not defined on chart: ${this.id}`),"_renderParams undefined";return this._renderParams}set renderParams(e){this._renderParams=e}clear(){this.glyphModifiers=[],la({chart:this})}destroy(){var e;this.clear(),this.divSelection.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect();for(let r in this)delete this[r]}highlight(e){let r=e.selector||F("highlight"),n=this.highlightSelection.selectAll(`rect.${r}`).data([e]);return n.enter().append("rect").attr("class",r).attr("y",0).attr("height","100%").merge(n).attr("x",this.xScale(e.start)+this.leftPadSize).attr("width",this.xScale(e.end)-this.xScale(e.start)).attr("fill",e.color||"black").attr("fill-opacity",e.opacity||.1),n.exit().remove(),r}clearHighlight(e){e==null?this.highlightSelection.selectAll("rect").remove():this.highlightSelection.selectAll(`rect.${e}`).remove()}zoomHighlight(){this.highlightSelection.selectAll("rect").attr("x",e=>this.xScale(e.start)+this.leftPadSize).attr("width",e=>this.xScale(e.end)-this.xScale(e.start))}static getDomainFromAnnotations(e){if(e==null||e==[])return[0,1];{let r=1/0,n=0;for(let i of e)r=Math.min(i.start,r),n=Math.max(i.end,n);return[r,n]}}};function Ld(t){return t}function Bd(t,e){return"translate("+t+","+e+")"}function qd(t,e,r,n,i,o){let a=r==j.Top,s=null,l=null;function u(h,m){return Bd(...f(h,m))}function f(h,m){return[Math.sin(h)*m,-Math.cos(h)*m]}function c(h){let m=s!=null?s:t.ticks!=null?t.ticks():t.domain(),g=l!=null?l:t.tickFormat?t.tickFormat():Ld,p=Math.max(n,0)+o,y=t.range(),b=t.copy(),w=h.selectAll(".domain").data([null]),v=h.selectAll(".tick").data(m,t).order(),S=v.exit(),R=v.enter().append("g").attr("class","tick"),E=v.select("line"),q=v.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),v=v.merge(R),E=E.merge(R.append("line").attr("stroke","#000")),q=q.merge(R.append("text").attr("fill","#000").attr("dy",".35em").attr("text-anchor","middle")),S.remove();function G(P,k){return"M"+f(P,k+i*(a?1:-1)).join(",")+"L"+f(P,k).join(",")}function H(P,k,d){return"M"+f(P,d).join(",")+(Math.abs(k-P)>=2*Math.PI?"A"+[d,d,0,1,1].concat(f(P+Math.PI,d)).join(",")+"A"+[d,d,0,1,1].concat(f(P,d)).join(","):"")+"A"+[d,d,0,Math.abs(k-P)%(2*Math.PI)>Math.PI?1:0,k>P?1:0].concat(f(k,d)).join(",")}w.attr("d",H(y[0],y[1],e)+G(y[0],e)+G(y[1],e)),v.attr("opacity",1).attr("transform",P=>u(b(P),e)),E.attr("x1",0).attr("y1",0).attr("x2",P=>f(b(P),n)[0]*(a?1:-1)).attr("y2",P=>f(b(P),n)[1]*(a?1:-1)),q.attr("x",P=>f(b(P),p)[0]*(a?1:-1)).attr("y",P=>f(b(P),p)[1]*(a?1:-1)).text(g),h.attr("fill","none").attr("font-size",10).attr("font-family","sans-serif")}return c.angleScale=h=>h!=null?(t=h,c):t,c.radius=h=>h!=null?(e=h,c):e,c}var Yu=class extends Ce{constructor(e){super(e);if(this.tickSizeOuter=B(e.tickSizeOuter,()=>6),this.tickSizeInner=B(e.tickSizeInner,()=>6),e.fixed)this.domain=B(e.domain,r=>[r.c.xScale.invert(this.chart.range[0]),r.c.xScale.invert(this.chart.range[1])]),this.range=B(e.range,()=>this.chart.range);else throw"non-fixed radial axis not implemented";this.axisType=B(e.axisType,()=>j.Top),this.initializePolicy.attributeRuleMap.set("group",[{key:"id",property:r=>r.a.id}]),this.zoomPolicy.attributeRuleMap.set("group",[{key:"transform",property:r=>`translate(${r.c.viewportWidthPx/2}, ${r.c.viewportWidthPx/2})`}])}buildScale(e){return vt().domain(this.domain(e)).range(this.range(e))}zoom(){let e=this.selectionMap.get("group");if(e==null)throw console.error("group selection undefined in call to zoom(), unable to build axis"),"group selection undefined";e.each((r,n,i)=>{let o=qd(this.buildScale(r),this.chart.outerRadius,this.axisType(r),this.tickSizeOuter(r),this.tickSizeInner(r),this.tickPadding(r));W(i[n]).call(o)}),this.selectionMap.set("axis-line",this.selection.selectAll("path.domain")),this.selectionMap.set("ticks",this.selection.selectAll("g.tick line")),this.selectionMap.set("tick-labels",this.selection.selectAll("g.tick text")),oe({selectionKeys:this.selectionKeys,selectionMap:this.selectionMap,policy:this.zoomPolicy,context:"zoom"})}};function Ku(t){let e=t.selector||F("soda-radial-axis-glyph"),r=Y(Object.assign(Object.assign({},t),{selector:e,elementType:"g"})),n=new Yu(Object.assign({selector:e,selection:r.merge},t));return t.chart.addGlyphModifier(n),r.g}function Hd(t){return e=>_e().innerRadius(r=>r.c.outerRadius-t.y(r)).outerRadius(r=>r.c.outerRadius-(t.y(r)+t.height(r))).startAngle(r=>Math.max(r.c.xScale(r.a.start),r.c.range[0])).endAngle(r=>Math.min(r.c.xScale(r.a.end),r.c.range[1]))(e)||""}var Fd=t=>`translate(${t.c.viewportWidthPx/2}, ${t.c.viewportWidthPx/2})`,$d=t=>{let e=t.c.xScale.domain();return t.a.start<e[1]&&t.a.end>e[0]?"visible":"hidden"},Qu=class extends nt{constructor(e){super(e);this.initializePolicy.attributeRuleMap.set("group",[{key:"id",property:this.id}]),this.initializePolicy.styleRuleMap.set("group",[{key:"stroke-width",property:e.strokeWidth},{key:"stroke-opacity",property:e.strokeOpacity},{key:"stroke",property:e.strokeColor},{key:"stroke-dasharray",property:e.strokeDashArray},{key:"stroke-dashoffset",property:e.strokeDashOffset},{key:"fill",property:e.fillColor},{key:"fill-opacity",property:e.fillOpacity}]),this.zoomPolicy.attributeRuleMap.set("group",[{key:"transform",property:Fd},{key:"d",property:Hd(this)},{key:"visibility",property:$d}])}};function Pe(t){let e=t.selector||F("soda-radial-rect-glyph"),r=Y(Object.assign(Object.assign({},t),{selector:e,elementType:"path"})),n=new Qu(Object.assign(Object.assign({},t),{selector:e,selection:r.merge}));return t.chart.addGlyphModifier(n),r.g}var Qr=class extends Ht{constructor(e){super(e);this.notchAngle=e.notchAngle!=null?e.notchAngle:Math.PI/200,this.xScale.range([this.notchAngle,2*Math.PI-this.notchAngle]),this.trackHeight=e.trackHeight||this.viewportWidthPx/4,this.trackHeightRatio=e.trackHeightRatio||this.trackHeight/this.viewportWidthPx,this.outerRadius=e.outerRadius||this.viewportWidthPx/2,this.outerRadiusRatio=e.outerRadiusRatio||this.outerRadius/this.viewportWidthPx,this.innerRadius=this.outerRadius-this.trackHeight,this.rowCount=e.rowCount||1,this.rowHeight=this.trackHeight/this.rowCount,this.setPadAttribute("height","100%"),this.updateDimensions=e.updateDimensions||function(){this.squareToDivWidth(),this.updateViewportProperties(),this.fitRadialDimensions(),this.renderTrackOutline()},this.draw=e.draw||function(r){this.addAxis(),Pe({chart:this,annotations:r.annotations||[]})},this.configureZoom()}fitRadialDimensions(){this.outerRadius=this.viewportWidthPx*this.outerRadiusRatio,this.trackHeight=this.viewportWidthPx*this.trackHeightRatio,this.innerRadius=this.outerRadius-this.trackHeight,this.rowHeight=this.trackHeight/this.rowCount}configureZoom(){let e=this;this.padSelection.call(er().filter(()=>N.type==="wheel"?N.ctrlKey:!0).scaleExtent([1,1/0]).on("zoom",()=>e.zoom())).on("dblclick.zoom",null)}addTrackOutline(){this.viewportSelection.selectAll("path.track-outline").data(["track-outline"]).enter().append("path").attr("class","track-outline").attr("stroke","black").attr("fill","none"),this.renderTrackOutline()}renderTrackOutline(){this.viewportSelection.selectAll("path.track-outline").attr("transform",`translate(${this.viewportWidthPx/2}, ${this.viewportWidthPx/2})`).attr("d",_e().innerRadius(this.innerRadius-1).outerRadius(this.outerRadius).startAngle(this.range[0]).endAngle(this.range[1])(null))}addAxis(){Ku(this.axisConfig)}squareToDivWidth(){let e=this.calculateDivDimensions();this.divHeight=e.width}updateViewportHeight(){if(this._viewportHeight!=null)return;let e=this.calculatePadHeight()-(this.upperPadSize+this.lowerPadSize);this.viewportHeightPx=e,this.setViewportAttribute("height",`${e}`)}updateViewportWidth(){if(this._viewportWidth!=null)return;let e=this.calculatePadWidth()-(this.leftPadSize+this.rightPadSize);this.viewportWidthPx=e,this.setViewportAttribute("width",`${e}`)}resize(){this.squareToDivWidth(),this.updateViewportProperties(),this.fitRadialDimensions(),this.renderTrackOutline(),this.applyGlyphModifiers(),this.postResize()}zoom(){super.zoom(),this.renderTrackOutline()}domainFromWheelEvent(e,r){let n=this.xScale.domain(),i=n[1]-n[0],o=this.initialDomain[1]-this.initialDomain[0],a=r.offsetY-this.upperPadSize-this.viewportWidthPx/2,s=r.offsetX-this.leftPadSize-this.viewportWidthPx/2,l=Math.sqrt(a*a+s*s),u=Math.asin(s/l);a<0?s<0&&(u+=2*Math.PI):u=Math.PI-u;let f=this.xScale.invert(u),c=(f-n[0])/i,h=(n[1]-f)/i,m=o/e.k,g=m*c,p=m*h,y=[f-g,f+p];return y[0]=Math.max(y[0],this.initialDomain[0]),y[1]=Math.min(y[1],this.initialDomain[1]),y}domainFromMousemoveEvent(e,r){let n=this.xScale.domain(),i=[n[0],n[1]],a=r.movementX/this.outerRadius*Math.PI*-1,s=this.xScale.invert(a)-this.xScale.invert(0);return i[0]+s<=this.initialDomain[0]?s=this.initialDomain[0]-i[0]:i[1]+s>=this.initialDomain[1]&&(s=this.initialDomain[1]-i[1]),i[0]+=s,i[1]+=s,i}updateRange(){}highlight(e){let r=e.selector||F("highlight"),n=this.highlightSelection.selectAll(`path.${r}`).data([e]);return n.enter().append("path").attr("class",r).attr("transform",`translate(${this.viewportWidthPx/2+this.leftPadSize}, ${this.viewportWidthPx/2+this.upperPadSize})`).merge(n).attr("d",o=>_e().innerRadius(()=>this.innerRadius).outerRadius(()=>this.outerRadius).startAngle(a=>Math.max(this.xScale(a.start),0)).endAngle(a=>Math.min(this.xScale(a.end),2*Math.PI))(o)).attr("fill",e.color||"black").attr("fill-opacity",e.opacity||.1),n.exit().remove(),r}clearHighlight(e){e==null?this.highlightSelection.selectAll("rect").remove():this.highlightSelection.selectAll(`rect.${e}`).remove()}zoomHighlight(){this.highlightSelection.selectAll("path").attr("transform",`translate(${this.viewportWidthPx/2+this.leftPadSize}, ${this.viewportWidthPx/2+this.upperPadSize})`).attr("d",e=>_e().innerRadius(r=>this.innerRadius).outerRadius(r=>this.outerRadius).startAngle(r=>Math.max(this.xScale(r.start),0)).endAngle(r=>Math.min(this.xScale(r.end),2*Math.PI))(e))}};var Zu=class extends Ce{constructor(e){super(e);this.domain=B(e.domain,()=>[0,1]),this.rowSpan=e.rowSpan||1,this.range=B(e.range,r=>[0,r.c.rowHeight*this.rowSpan-4]),this.ticks=B(e.ticks,()=>5),this.tickSizeOuter=B(e.tickSizeOuter,()=>6),this.axisType=B(e.axisType,()=>j.Left),this.initializePolicy.attributeRuleMap.set("group",[{key:"id",property:r=>r.a.id}]),this.zoomPolicy.attributeRuleMap.set("group",[{key:"transform",property:r=>`translate(${this.x(r)}, ${this.y(r)})`}])}buildScale(e){return vt().domain(this.domain(e).slice().reverse()).range(this.range(e))}};function ua(t){let e=t.selector||F("soda-vertical-axis-glyph"),r=Y(Object.assign(Object.assign({},t),{selector:e,elementType:"g"})),n=new Zu(Object.assign({selector:e,selection:r.merge},t));return t.chart.addGlyphModifier(n),r.g}function Zr(t,e){let r=e.rowSpan||1,n=e.domain||[0,1],i=e.range||(o=>[0,o.c.rowHeight*r-4]);for(let o of e.data)t.set(o.a.id,vt().domain(ut(n,o)).range(ut(i,o)))}var ju=new Map,Wd=t=>{let e=ju.get(t.a.id);if(e==null)return console.error(`yScale not defined for annotation: ${t.a.id} in call to linePlot()`),"";let r=ye(),n=Hr(r);n.lineStart();for(let[i,o]of t.a.values.entries())n.point(t.c.xScale(t.a.start+i),e(o));return n.lineEnd(),r.toString()},Ju=class extends nt{constructor(e){super(e);this.d=Wd,this.initializePolicy.attributeRuleMap.set("group",[{key:"id",property:this.id},{key:"transform",property:r=>`translate(0, ${this.y(r)})`}]),this.initializePolicy.styleRuleMap.set("group",[{key:"stroke-width",property:e.strokeWidth},{key:"stroke-opacity",property:e.strokeOpacity},{key:"stroke",property:e.strokeColor||"black"},{key:"stroke-dasharray",property:e.strokeDashArray},{key:"stroke-dashoffset",property:e.strokeDashOffset},{key:"fill",property:e.fillColor||"none"},{key:"fill-opacity",property:e.fillOpacity}]),this.zoomPolicy.attributeRuleMap.set("group",[{key:"d",property:this.d}])}};function fa(t){let e=t.selector||F("soda-line-plot-glyph"),r=Y(Object.assign(Object.assign({},t),{selector:e,elementType:"path"})),n=r.g.selectAll(`path.${e}`).data();Zr(ju,Object.assign(Object.assign({},t),{data:n}));let i=new Ju(Object.assign(Object.assign({},t),{selector:e,selection:r.merge}));return t.chart.addGlyphModifier(i),r.g}var jr;(function(t){t.Up="up",t.Down="down"})(jr||(jr={}));var tf=new Map;function Ud(t){return e=>{let r=tf.get(e.a.id);if(r==null)return console.error("yScale not defined for",e.a,"in call to area()"),"";let n=ye(),i=Hr(n);i.lineStart();let o=ut(t.fillDirection,e),a=r.range();o==jr.Down?i.point(e.c.xScale(e.a.start),a[1]):i.point(e.c.xScale(e.a.start),e.c.rowHeight);for(let[s,l]of e.a.values.entries())i.point(e.c.xScale(e.a.start+s),r(l));return o==jr.Down?(i.point(e.c.xScale(e.a.start+e.a.values.length),a[1]),i.point(e.c.xScale(e.a.start),a[1])):(i.point(e.c.xScale(e.a.start+e.a.values.length),e.c.rowHeight),i.point(e.c.xScale(e.a.start),e.c.rowHeight)),i.lineEnd(),n.toString()}}var ef=class extends nt{constructor(e){super(e);this.d=Ud(this),this.fillDirection=B(e.fillDirection,()=>jr.Down),this.initializePolicy.attributeRuleMap.set("group",[{key:"id",property:this.id},{key:"transform",property:r=>`translate(0, ${this.y(r)})`}]),this.initializePolicy.styleRuleMap.set("group",[{key:"stroke-width",property:e.strokeWidth},{key:"stroke-opacity",property:e.strokeOpacity},{key:"stroke",property:e.strokeColor||"black"},{key:"stroke-dasharray",property:e.strokeDashArray},{key:"stroke-dashoffset",property:e.strokeDashOffset},{key:"fill",property:e.fillColor||"black"},{key:"fill-opacity",property:e.fillOpacity}]),this.zoomPolicy.attributeRuleMap.set("group",[{key:"d",property:this.d}])}};function ca(t){let e=t.selector||F("soda-area-glyph"),r=Y(Object.assign(Object.assign({},t),{selector:e,elementType:"path"})),n=r.g.selectAll(`path.${e}`).data();Zr(tf,Object.assign(Object.assign({},t),{data:n}));let i=new ef(Object.assign(Object.assign({},t),{selector:e,selection:r.merge}));return t.chart.addGlyphModifier(i),r.g}var rf=!1,Jr;function Kd(){if(!rf){Jr=W("body").append("div").attr("class","soda-tooltip").style("background-color","lightsteelblue").style("border-radius","8px").style("padding","4px").style("position","absolute").style("opacity",0),rf=!0;return}}function ir(t){Kd(),Yr(Object.assign(Object.assign({},t),{mouseover:(e,r)=>{Qd(e,r,t)},mouseout:()=>{Zd()}}))}function Qd(t,e,r){let n=r.textColor||"black",i=r.fontSize||10,o=r.fontWeight||"normal",a=r.fontFamily||"Titillium Web, Arial, sans-serif",s=r.fontStyle||"normal",l=r.opacity||1,u=r.backgroundColor||"lightsteelblue",f=r.borderRadius||8,c=r.padding||6;Jr.style("background-color",ut(u,e)).style("border-radius",ut(f,e)+"px").style("padding",ut(c,e)+"px").interrupt().transition().duration(200).style("opacity",ut(l,e)),Jr.html(ut(r.text,e)).style("color",ut(n,e)).style("font-size",ut(i,e)).style("font-weight",ut(o,e)).style("font-family",ut(a,e)).style("font-style",ut(s,e)).style("left",N.pageX+"px").style("top",N.pageY+20+"px")}function Zd(){Jr.transition().duration(500).style("opacity",0).on("end",()=>{Jr.html("").style("left","0px").style("top","0px")})}var ha;(function(t){t.Sequential="sequential",t.Random="random"})(ha||(ha={}));var to=Ah(nf());function Ft(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function _i(t){return t.length===1&&(t=eg(t)),{left:function(e,r,n,i){for(n==null&&(n=0),i==null&&(i=e.length);n<i;){var o=n+i>>>1;t(e[o],r)<0?n=o+1:i=o}return n},right:function(e,r,n,i){for(n==null&&(n=0),i==null&&(i=e.length);n<i;){var o=n+i>>>1;t(e[o],r)>0?i=o:n=o+1}return n}}}function eg(t){return function(e,r){return Ft(t(e),r)}}var of=_i(Ft),rg=of.right,ng=of.left;var af=Array.prototype,og=af.slice,ag=af.map;var h5=Math.sqrt(50),p5=Math.sqrt(10),m5=Math.sqrt(2);var hg=Array.prototype.slice;var pg={value:function(){}};function cf(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Ai(r)}function Ai(t){this._=t}function mg(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Ai.prototype=cf.prototype={constructor:Ai,on:function(t,e){var r=this._,n=mg(t+"",r),i,o=-1,a=n.length;if(arguments.length<2){for(;++o<a;)if((i=(t=n[o]).type)&&(i=dg(r[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=n[o]).type)r[i]=ff(r[i],t.name,e);else if(e==null)for(i in r)r[i]=ff(r[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Ai(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,o;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],n=0,i=o.length;n<i;++n)o[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],i=0,o=n.length;i<o;++i)n[i].value.apply(e,r)}};function dg(t,e){for(var r=0,n=t.length,i;r<n;++r)if((i=t[r]).name===e)return i.value}function ff(t,e,r){for(var n=0,i=t.length;n<i;++n)if(t[n].name===e){t[n]=pg,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var ga=cf;var zi="http://www.w3.org/1999/xhtml",ya={svg:"http://www.w3.org/2000/svg",xhtml:zi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Qt(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),ya.hasOwnProperty(e)?{space:ya[e],local:t}:t}function gg(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===zi&&e.documentElement.namespaceURI===zi?e.createElement(t):e.createElementNS(r,t)}}function yg(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ci(t){var e=Qt(t);return(e.local?yg:gg)(e)}function xg(){}function Ee(t){return t==null?xg:function(){return this.querySelector(t)}}function hf(t){typeof t!="function"&&(t=Ee(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var o=e[i],a=o.length,s=n[i]=new Array(a),l,u,f=0;f<a;++f)(l=o[f])&&(u=t.call(l,l.__data__,f,o))&&("__data__"in l&&(u.__data__=l.__data__),s[f]=u);return new Z(n,this._parents)}function vg(){return[]}function rn(t){return t==null?vg:function(){return this.querySelectorAll(t)}}function pf(t){typeof t!="function"&&(t=rn(t));for(var e=this._groups,r=e.length,n=[],i=[],o=0;o<r;++o)for(var a=e[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(n.push(t.call(l,l.__data__,u,a)),i.push(l));return new Z(n,i)}function nn(t){return function(){return this.matches(t)}}function mf(t){typeof t!="function"&&(t=nn(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var o=e[i],a=o.length,s=n[i]=[],l,u=0;u<a;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&s.push(l);return new Z(n,this._parents)}function Ri(t){return new Array(t.length)}function df(){return new Z(this._enter||this._groups.map(Ri),this._parents)}function on(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}on.prototype={constructor:on,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function gf(t){return function(){return t}}var yf="$";function wg(t,e,r,n,i,o){for(var a=0,s,l=e.length,u=o.length;a<u;++a)(s=e[a])?(s.__data__=o[a],n[a]=s):r[a]=new on(t,o[a]);for(;a<l;++a)(s=e[a])&&(i[a]=s)}function bg(t,e,r,n,i,o,a){var s,l,u={},f=e.length,c=o.length,h=new Array(f),m;for(s=0;s<f;++s)(l=e[s])&&(h[s]=m=yf+a.call(l,l.__data__,s,e),m in u?i[s]=l:u[m]=l);for(s=0;s<c;++s)m=yf+a.call(t,o[s],s,o),(l=u[m])?(n[s]=l,l.__data__=o[s],u[m]=null):r[s]=new on(t,o[s]);for(s=0;s<f;++s)(l=e[s])&&u[h[s]]===l&&(i[s]=l)}function xf(t,e){if(!t)return m=new Array(this.size()),u=-1,this.each(function(E){m[++u]=E}),m;var r=e?bg:wg,n=this._parents,i=this._groups;typeof t!="function"&&(t=gf(t));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var f=n[u],c=i[u],h=c.length,m=t.call(f,f&&f.__data__,u,n),g=m.length,p=s[u]=new Array(g),y=a[u]=new Array(g),b=l[u]=new Array(h);r(f,c,p,y,b,m,e);for(var w=0,v=0,S,R;w<g;++w)if(S=p[w]){for(w>=v&&(v=w+1);!(R=y[v])&&++v<g;);S._next=R||null}}return a=new Z(a,n),a._enter=s,a._exit=l,a}function vf(){return new Z(this._exit||this._groups.map(Ri),this._parents)}function wf(t,e,r){var n=this.enter(),i=this,o=this.exit();return n=typeof t=="function"?t(n):n.append(t+""),e!=null&&(i=e(i)),r==null?o.remove():r(o),n&&i?n.merge(i).order():i}function bf(t){for(var e=this._groups,r=t._groups,n=e.length,i=r.length,o=Math.min(n,i),a=new Array(n),s=0;s<o;++s)for(var l=e[s],u=r[s],f=l.length,c=a[s]=new Array(f),h,m=0;m<f;++m)(h=l[m]||u[m])&&(c[m]=h);for(;s<n;++s)a[s]=e[s];return new Z(a,this._parents)}function kf(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],i=n.length-1,o=n[i],a;--i>=0;)(a=n[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Mf(t){t||(t=kg);function e(c,h){return c&&h?t(c.__data__,h.__data__):!c-!h}for(var r=this._groups,n=r.length,i=new Array(n),o=0;o<n;++o){for(var a=r[o],s=a.length,l=i[o]=new Array(s),u,f=0;f<s;++f)(u=a[f])&&(l[f]=u);l.sort(e)}return new Z(i,this._parents).order()}function kg(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function _f(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Sf(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function Af(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],i=0,o=n.length;i<o;++i){var a=n[i];if(a)return a}return null}function zf(){var t=0;return this.each(function(){++t}),t}function Cf(){return!this.node()}function Rf(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var i=e[r],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function Mg(t){return function(){this.removeAttribute(t)}}function _g(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Sg(t,e){return function(){this.setAttribute(t,e)}}function Ag(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function zg(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function Cg(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function Nf(t,e){var r=Qt(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?_g:Mg:typeof e=="function"?r.local?Cg:zg:r.local?Ag:Sg)(r,e))}function Ni(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Rg(t){return function(){this.style.removeProperty(t)}}function Ng(t,e,r){return function(){this.style.setProperty(t,e,r)}}function Pg(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function Pf(t,e,r){return arguments.length>1?this.each((e==null?Rg:typeof e=="function"?Pg:Ng)(t,e,r??"")):le(this.node(),t)}function le(t,e){return t.style.getPropertyValue(e)||Ni(t).getComputedStyle(t,null).getPropertyValue(e)}function Eg(t){return function(){delete this[t]}}function Og(t,e){return function(){this[t]=e}}function Ig(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function Ef(t,e){return arguments.length>1?this.each((e==null?Eg:typeof e=="function"?Ig:Og)(t,e)):this.node()[t]}function Of(t){return t.trim().split(/^|\s+/)}function xa(t){return t.classList||new If(t)}function If(t){this._node=t,this._names=Of(t.getAttribute("class")||"")}If.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Tf(t,e){for(var r=xa(t),n=-1,i=e.length;++n<i;)r.add(e[n])}function Df(t,e){for(var r=xa(t),n=-1,i=e.length;++n<i;)r.remove(e[n])}function Tg(t){return function(){Tf(this,t)}}function Dg(t){return function(){Df(this,t)}}function Lg(t,e){return function(){(e.apply(this,arguments)?Tf:Df)(this,t)}}function Lf(t,e){var r=Of(t+"");if(arguments.length<2){for(var n=xa(this.node()),i=-1,o=r.length;++i<o;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof e=="function"?Lg:e?Tg:Dg)(r,e))}function Bg(){this.textContent=""}function qg(t){return function(){this.textContent=t}}function Hg(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Bf(t){return arguments.length?this.each(t==null?Bg:(typeof t=="function"?Hg:qg)(t)):this.node().textContent}function Fg(){this.innerHTML=""}function $g(t){return function(){this.innerHTML=t}}function Gg(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function qf(t){return arguments.length?this.each(t==null?Fg:(typeof t=="function"?Gg:$g)(t)):this.node().innerHTML}function Vg(){this.nextSibling&&this.parentNode.appendChild(this)}function Hf(){return this.each(Vg)}function Xg(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ff(){return this.each(Xg)}function $f(t){var e=typeof t=="function"?t:Ci(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Wg(){return null}function Gf(t,e){var r=typeof t=="function"?t:Ci(t),n=e==null?Wg:typeof e=="function"?e:Ee(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function Ug(){var t=this.parentNode;t&&t.removeChild(this)}function Vf(){return this.each(Ug)}function Yg(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Kg(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Xf(t){return this.select(t?Kg:Yg)}function Wf(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Yf={},va=null;typeof document<"u"&&(Uf=document.documentElement,"onmouseenter"in Uf||(Yf={mouseenter:"mouseover",mouseleave:"mouseout"}));var Uf;function Qg(t,e,r){return t=Kf(t,e,r),function(n){var i=n.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,n)}}function Kf(t,e,r){return function(n){var i=va;va=n;try{t.call(this,this.__data__,e,r)}finally{va=i}}}function Zg(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function jg(t){return function(){var e=this.__on;if(!!e){for(var r=0,n=-1,i=e.length,o;r<i;++r)o=e[r],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.capture):e[++n]=o;++n?e.length=n:delete this.__on}}}function Jg(t,e,r){var n=Yf.hasOwnProperty(t.type)?Qg:Kf;return function(i,o,a){var s=this.__on,l,u=n(e,o,a);if(s){for(var f=0,c=s.length;f<c;++f)if((l=s[f]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=u,l.capture=r),l.value=e;return}}this.addEventListener(t.type,u,r),l={type:t.type,name:t.name,value:e,listener:u,capture:r},s?s.push(l):this.__on=[l]}}function Qf(t,e,r){var n=Zg(t+""),i,o=n.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,f;l<u;++l)for(i=0,f=s[l];i<o;++i)if((a=n[i]).type===f.type&&a.name===f.name)return f.value}return}for(s=e?Jg:jg,r==null&&(r=!1),i=0;i<o;++i)this.each(s(n[i],e,r));return this}function Zf(t,e,r){var n=Ni(t),i=n.CustomEvent;typeof i=="function"?i=new i(e,r):(i=n.document.createEvent("Event"),r?(i.initEvent(e,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function t0(t,e){return function(){return Zf(this,t,e)}}function e0(t,e){return function(){return Zf(this,t,e.apply(this,arguments))}}function jf(t,e){return this.each((typeof e=="function"?e0:t0)(t,e))}var wa=[null];function Z(t,e){this._groups=t,this._parents=e}function Jf(){return new Z([[document.documentElement]],wa)}Z.prototype=Jf.prototype={constructor:Z,select:hf,selectAll:pf,filter:mf,data:xf,enter:df,exit:vf,join:wf,merge:bf,order:kf,sort:Mf,call:_f,nodes:Sf,node:Af,size:zf,empty:Cf,each:Rf,attr:Nf,style:Pf,property:Ef,classed:Lf,text:Bf,html:qf,raise:Hf,lower:Ff,append:$f,insert:Gf,remove:Vf,clone:Xf,datum:Wf,on:Qf,dispatch:jf};var Zt=Jf;function Ct(t){return typeof t=="string"?new Z([[document.querySelector(t)]],[document.documentElement]):new Z([[t]],wa)}function Pi(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function ba(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function ln(){}var an=.7,Oi=1/an,ar="\\s*([+-]?\\d+)\\s*",sn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",r0=/^#([0-9a-f]{3,8})$/,n0=new RegExp("^rgb\\("+[ar,ar,ar]+"\\)$"),i0=new RegExp("^rgb\\("+[Gt,Gt,Gt]+"\\)$"),o0=new RegExp("^rgba\\("+[ar,ar,ar,sn]+"\\)$"),a0=new RegExp("^rgba\\("+[Gt,Gt,Gt,sn]+"\\)$"),s0=new RegExp("^hsl\\("+[sn,Gt,Gt]+"\\)$"),l0=new RegExp("^hsla\\("+[sn,Gt,Gt,sn]+"\\)$"),tc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Pi(ln,ue,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:ec,formatHex:ec,formatHsl:u0,formatRgb:rc,toString:rc});function ec(){return this.rgb().formatHex()}function u0(){return sc(this).formatHsl()}function rc(){return this.rgb().formatRgb()}function ue(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=r0.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?nc(e):r===3?new kt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Ei(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Ei(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=n0.exec(t))?new kt(e[1],e[2],e[3],1):(e=i0.exec(t))?new kt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=o0.exec(t))?Ei(e[1],e[2],e[3],e[4]):(e=a0.exec(t))?Ei(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=s0.exec(t))?ac(e[1],e[2]/100,e[3]/100,1):(e=l0.exec(t))?ac(e[1],e[2]/100,e[3]/100,e[4]):tc.hasOwnProperty(t)?nc(tc[t]):t==="transparent"?new kt(NaN,NaN,NaN,0):null}function nc(t){return new kt(t>>16&255,t>>8&255,t&255,1)}function Ei(t,e,r,n){return n<=0&&(t=e=r=NaN),new kt(t,e,r,n)}function f0(t){return t instanceof ln||(t=ue(t)),t?(t=t.rgb(),new kt(t.r,t.g,t.b,t.opacity)):new kt}function sr(t,e,r,n){return arguments.length===1?f0(t):new kt(t,e,r,n??1)}function kt(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}Pi(kt,sr,ba(ln,{brighter:function(t){return t=t==null?Oi:Math.pow(Oi,t),new kt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?an:Math.pow(an,t),new kt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ic,formatHex:ic,formatRgb:oc,toString:oc}));function ic(){return"#"+ka(this.r)+ka(this.g)+ka(this.b)}function oc(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function ka(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function ac(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new $t(t,e,r,n)}function sc(t){if(t instanceof $t)return new $t(t.h,t.s,t.l,t.opacity);if(t instanceof ln||(t=ue(t)),!t)return new $t;if(t instanceof $t)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),o=Math.max(e,r,n),a=NaN,s=o-i,l=(o+i)/2;return s?(e===o?a=(r-n)/s+(r<n)*6:r===o?a=(n-e)/s+2:a=(e-r)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new $t(a,s,l,t.opacity)}function lc(t,e,r,n){return arguments.length===1?sc(t):new $t(t,e,r,n??1)}function $t(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}Pi($t,lc,ba(ln,{brighter:function(t){return t=t==null?Oi:Math.pow(Oi,t),new $t(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?an:Math.pow(an,t),new $t(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new kt(Ma(t>=240?t-240:t+120,i,n),Ma(t,i,n),Ma(t<120?t+240:t-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function Ma(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}function _a(t,e,r,n,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*r+(1+3*t+3*o-3*a)*n+a*i)/6}function uc(t){var e=t.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),i=t[n],o=t[n+1],a=n>0?t[n-1]:2*i-o,s=n<e-1?t[n+2]:2*o-i;return _a((r-n/e)*e,a,i,o,s)}}function fc(t){var e=t.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*e),i=t[(n+e-1)%e],o=t[n%e],a=t[(n+1)%e],s=t[(n+2)%e];return _a((r-n/e)*e,i,o,a,s)}}function Sa(t){return function(){return t}}function c0(t,e){return function(r){return t+r*e}}function h0(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function cc(t){return(t=+t)==1?Ii:function(e,r){return r-e?h0(e,r,t):Sa(isNaN(e)?r:e)}}function Ii(t,e){var r=e-t;return r?c0(t,r):Sa(isNaN(t)?e:t)}var Ti=function t(e){var r=cc(e);function n(i,o){var a=r((i=sr(i)).r,(o=sr(o)).r),s=r(i.g,o.g),l=r(i.b,o.b),u=Ii(i.opacity,o.opacity);return function(f){return i.r=a(f),i.g=s(f),i.b=l(f),i.opacity=u(f),i+""}}return n.gamma=t,n}(1);function hc(t){return function(e){var r=e.length,n=new Array(r),i=new Array(r),o=new Array(r),a,s;for(a=0;a<r;++a)s=sr(e[a]),n[a]=s.r||0,i[a]=s.g||0,o[a]=s.b||0;return n=t(n),i=t(i),o=t(o),s.opacity=1,function(l){return s.r=n(l),s.g=i(l),s.b=o(l),s+""}}}var p0=hc(uc),m0=hc(fc);function Rt(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var za=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Aa=new RegExp(za.source,"g");function d0(t){return function(){return t}}function g0(t){return function(e){return t(e)+""}}function Ca(t,e){var r=za.lastIndex=Aa.lastIndex=0,n,i,o,a=-1,s=[],l=[];for(t=t+"",e=e+"";(n=za.exec(t))&&(i=Aa.exec(e));)(o=i.index)>r&&(o=e.slice(r,o),s[a]?s[a]+=o:s[++a]=o),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:Rt(n,i)})),r=Aa.lastIndex;return r<e.length&&(o=e.slice(r),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?g0(l[0].x):d0(e):(e=l.length,function(u){for(var f=0,c;f<e;++f)s[(c=l[f]).i]=c.x(u);return s.join("")})}var pc=180/Math.PI,Di={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ra(t,e,r,n,i,o){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*r+e*n)&&(r-=t*l,n-=e*l),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,l/=s),t*n<e*r&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*pc,skewX:Math.atan(l)*pc,scaleX:a,scaleY:s}}var un,Na,mc,Li;function dc(t){return t==="none"?Di:(un||(un=document.createElement("DIV"),Na=document.documentElement,mc=document.defaultView),un.style.transform=t,t=mc.getComputedStyle(Na.appendChild(un),null).getPropertyValue("transform"),Na.removeChild(un),t=t.slice(7,-1).split(","),Ra(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function gc(t){return t==null?Di:(Li||(Li=document.createElementNS("http://www.w3.org/2000/svg","g")),Li.setAttribute("transform",t),(t=Li.transform.baseVal.consolidate())?(t=t.matrix,Ra(t.a,t.b,t.c,t.d,t.e,t.f)):Di)}function yc(t,e,r,n){function i(u){return u.length?u.pop()+" ":""}function o(u,f,c,h,m,g){if(u!==c||f!==h){var p=m.push("translate(",null,e,null,r);g.push({i:p-4,x:Rt(u,c)},{i:p-2,x:Rt(f,h)})}else(c||h)&&m.push("translate("+c+e+h+r)}function a(u,f,c,h){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),h.push({i:c.push(i(c)+"rotate(",null,n)-2,x:Rt(u,f)})):f&&c.push(i(c)+"rotate("+f+n)}function s(u,f,c,h){u!==f?h.push({i:c.push(i(c)+"skewX(",null,n)-2,x:Rt(u,f)}):f&&c.push(i(c)+"skewX("+f+n)}function l(u,f,c,h,m,g){if(u!==c||f!==h){var p=m.push(i(m)+"scale(",null,",",null,")");g.push({i:p-4,x:Rt(u,c)},{i:p-2,x:Rt(f,h)})}else(c!==1||h!==1)&&m.push(i(m)+"scale("+c+","+h+")")}return function(u,f){var c=[],h=[];return u=t(u),f=t(f),o(u.translateX,u.translateY,f.translateX,f.translateY,c,h),a(u.rotate,f.rotate,c,h),s(u.skewX,f.skewX,c,h),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,c,h),u=f=null,function(m){for(var g=-1,p=h.length,y;++g<p;)c[(y=h[g]).i]=y.x(m);return c.join("")}}}var Pa=yc(dc,"px, ","px)","deg)"),Ea=yc(gc,", ",")",")");var lr=0,cn=0,fn=0,vc=1e3,Bi,hn,qi=0,Oe=0,Hi=0,pn=typeof performance=="object"&&performance.now?performance:Date,wc=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ur(){return Oe||(wc(y0),Oe=pn.now()+Hi)}function y0(){Oe=0}function mn(){this._call=this._time=this._next=null}mn.prototype=Fi.prototype={constructor:mn,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?ur():+r)+(e==null?0:+e),!this._next&&hn!==this&&(hn?hn._next=this:Bi=this,hn=this),this._call=t,this._time=r,Oa()},stop:function(){this._call&&(this._call=null,this._time=1/0,Oa())}};function Fi(t,e,r){var n=new mn;return n.restart(t,e,r),n}function bc(){ur(),++lr;for(var t=Bi,e;t;)(e=Oe-t._time)>=0&&t._call.call(null,e),t=t._next;--lr}function xc(){Oe=(qi=pn.now())+Hi,lr=cn=0;try{bc()}finally{lr=0,v0(),Oe=0}}function x0(){var t=pn.now(),e=t-qi;e>vc&&(Hi-=e,qi=t)}function v0(){for(var t,e=Bi,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:Bi=r);hn=t,Oa(n)}function Oa(t){if(!lr){cn&&(cn=clearTimeout(cn));var e=t-Oe;e>24?(t<1/0&&(cn=setTimeout(xc,t-pn.now()-Hi)),fn&&(fn=clearInterval(fn))):(fn||(qi=pn.now(),fn=setInterval(x0,vc)),lr=1,wc(xc))}}function $i(t,e,r){var n=new mn;return e=e==null?0:+e,n.restart(function(i){n.stop(),t(i+e)},e,r),n}var w0=ga("start","end","cancel","interrupt"),b0=[],Mc=0,Ia=1,Vi=2,Gi=3,kc=4,Xi=5,dn=6;function fe(t,e,r,n,i,o){var a=t.__transition;if(!a)t.__transition={};else if(r in a)return;k0(t,r,{name:e,index:n,group:i,on:w0,tween:b0,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Mc})}function gn(t,e){var r=it(t,e);if(r.state>Mc)throw new Error("too late; already scheduled");return r}function gt(t,e){var r=it(t,e);if(r.state>Gi)throw new Error("too late; already running");return r}function it(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function k0(t,e,r){var n=t.__transition,i;n[e]=r,r.timer=Fi(o,0,r.time);function o(u){r.state=Ia,r.timer.restart(a,r.delay,r.time),r.delay<=u&&a(u-r.delay)}function a(u){var f,c,h,m;if(r.state!==Ia)return l();for(f in n)if(m=n[f],m.name===r.name){if(m.state===Gi)return $i(a);m.state===kc?(m.state=dn,m.timer.stop(),m.on.call("interrupt",t,t.__data__,m.index,m.group),delete n[f]):+f<e&&(m.state=dn,m.timer.stop(),m.on.call("cancel",t,t.__data__,m.index,m.group),delete n[f])}if($i(function(){r.state===Gi&&(r.state=kc,r.timer.restart(s,r.delay,r.time),s(u))}),r.state=Vi,r.on.call("start",t,t.__data__,r.index,r.group),r.state===Vi){for(r.state=Gi,i=new Array(h=r.tween.length),f=0,c=-1;f<h;++f)(m=r.tween[f].value.call(t,t.__data__,r.index,r.group))&&(i[++c]=m);i.length=c+1}}function s(u){for(var f=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(l),r.state=Xi,1),c=-1,h=i.length;++c<h;)i[c].call(t,f);r.state===Xi&&(r.on.call("end",t,t.__data__,r.index,r.group),l())}function l(){r.state=dn,r.timer.stop(),delete n[e];for(var u in n)return;delete t.__transition}}function yn(t,e){var r=t.__transition,n,i,o=!0,a;if(!!r){e=e==null?null:e+"";for(a in r){if((n=r[a]).name!==e){o=!1;continue}i=n.state>Vi&&n.state<Xi,n.state=dn,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[a]}o&&delete t.__transition}}function _c(t){return this.each(function(){yn(this,t)})}function M0(t,e){var r,n;return function(){var i=gt(this,t),o=i.tween;if(o!==r){n=r=o;for(var a=0,s=n.length;a<s;++a)if(n[a].name===e){n=n.slice(),n.splice(a,1);break}}i.tween=n}}function _0(t,e,r){var n,i;if(typeof r!="function")throw new Error;return function(){var o=gt(this,t),a=o.tween;if(a!==n){i=(n=a).slice();for(var s={name:e,value:r},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=s;break}l===u&&i.push(s)}o.tween=i}}function Sc(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=it(this.node(),r).tween,i=0,o=n.length,a;i<o;++i)if((a=n[i]).name===t)return a.value;return null}return this.each((e==null?M0:_0)(r,t,e))}function fr(t,e,r){var n=t._id;return t.each(function(){var i=gt(this,n);(i.value||(i.value={}))[e]=r.apply(this,arguments)}),function(i){return it(i,n).value[e]}}function Wi(t,e){var r;return(typeof e=="number"?Rt:e instanceof ue?Ti:(r=ue(e))?(e=r,Ti):Ca)(t,e)}function S0(t){return function(){this.removeAttribute(t)}}function A0(t){return function(){this.removeAttributeNS(t.space,t.local)}}function z0(t,e,r){var n,i=r+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===n?o:o=e(n=a,r)}}function C0(t,e,r){var n,i=r+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===n?o:o=e(n=a,r)}}function R0(t,e,r){var n,i,o;return function(){var a,s=r(this),l;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=s+"",a===l?null:a===n&&l===i?o:(i=l,o=e(n=a,s)))}}function N0(t,e,r){var n,i,o;return function(){var a,s=r(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=s+"",a===l?null:a===n&&l===i?o:(i=l,o=e(n=a,s)))}}function Ac(t,e){var r=Qt(t),n=r==="transform"?Ea:Wi;return this.attrTween(t,typeof e=="function"?(r.local?N0:R0)(r,n,fr(this,"attr."+t,e)):e==null?(r.local?A0:S0)(r):(r.local?C0:z0)(r,n,e))}function P0(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function E0(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function O0(t,e){var r,n;function i(){var o=e.apply(this,arguments);return o!==n&&(r=(n=o)&&E0(t,o)),r}return i._value=e,i}function I0(t,e){var r,n;function i(){var o=e.apply(this,arguments);return o!==n&&(r=(n=o)&&P0(t,o)),r}return i._value=e,i}function zc(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=Qt(t);return this.tween(r,(n.local?O0:I0)(n,e))}function T0(t,e){return function(){gn(this,t).delay=+e.apply(this,arguments)}}function D0(t,e){return e=+e,function(){gn(this,t).delay=e}}function Cc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?T0:D0)(e,t)):it(this.node(),e).delay}function L0(t,e){return function(){gt(this,t).duration=+e.apply(this,arguments)}}function B0(t,e){return e=+e,function(){gt(this,t).duration=e}}function Rc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?L0:B0)(e,t)):it(this.node(),e).duration}function q0(t,e){if(typeof e!="function")throw new Error;return function(){gt(this,t).ease=e}}function Nc(t){var e=this._id;return arguments.length?this.each(q0(e,t)):it(this.node(),e).ease}function Pc(t){typeof t!="function"&&(t=nn(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var o=e[i],a=o.length,s=n[i]=[],l,u=0;u<a;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&s.push(l);return new ct(n,this._parents,this._name,this._id)}function Ec(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,i=r.length,o=Math.min(n,i),a=new Array(n),s=0;s<o;++s)for(var l=e[s],u=r[s],f=l.length,c=a[s]=new Array(f),h,m=0;m<f;++m)(h=l[m]||u[m])&&(c[m]=h);for(;s<n;++s)a[s]=e[s];return new ct(a,this._parents,this._name,this._id)}function H0(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function F0(t,e,r){var n,i,o=H0(e)?gn:gt;return function(){var a=o(this,t),s=a.on;s!==n&&(i=(n=s).copy()).on(e,r),a.on=i}}function Oc(t,e){var r=this._id;return arguments.length<2?it(this.node(),r).on.on(t):this.each(F0(r,t,e))}function $0(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function Ic(){return this.on("end.remove",$0(this._id))}function Tc(t){var e=this._name,r=this._id;typeof t!="function"&&(t=Ee(t));for(var n=this._groups,i=n.length,o=new Array(i),a=0;a<i;++a)for(var s=n[a],l=s.length,u=o[a]=new Array(l),f,c,h=0;h<l;++h)(f=s[h])&&(c=t.call(f,f.__data__,h,s))&&("__data__"in f&&(c.__data__=f.__data__),u[h]=c,fe(u[h],e,r,h,u,it(f,r)));return new ct(o,this._parents,e,r)}function Dc(t){var e=this._name,r=this._id;typeof t!="function"&&(t=rn(t));for(var n=this._groups,i=n.length,o=[],a=[],s=0;s<i;++s)for(var l=n[s],u=l.length,f,c=0;c<u;++c)if(f=l[c]){for(var h=t.call(f,f.__data__,c,l),m,g=it(f,r),p=0,y=h.length;p<y;++p)(m=h[p])&&fe(m,e,r,p,h,g);o.push(h),a.push(f)}return new ct(o,a,e,r)}var G0=Zt.prototype.constructor;function Lc(){return new G0(this._groups,this._parents)}function V0(t,e){var r,n,i;return function(){var o=le(this,t),a=(this.style.removeProperty(t),le(this,t));return o===a?null:o===r&&a===n?i:i=e(r=o,n=a)}}function Bc(t){return function(){this.style.removeProperty(t)}}function X0(t,e,r){var n,i=r+"",o;return function(){var a=le(this,t);return a===i?null:a===n?o:o=e(n=a,r)}}function W0(t,e,r){var n,i,o;return function(){var a=le(this,t),s=r(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),le(this,t))),a===l?null:a===n&&l===i?o:(i=l,o=e(n=a,s))}}function U0(t,e){var r,n,i,o="style."+e,a="end."+o,s;return function(){var l=gt(this,t),u=l.on,f=l.value[o]==null?s||(s=Bc(e)):void 0;(u!==r||i!==f)&&(n=(r=u).copy()).on(a,i=f),l.on=n}}function qc(t,e,r){var n=(t+="")=="transform"?Pa:Wi;return e==null?this.styleTween(t,V0(t,n)).on("end.style."+t,Bc(t)):typeof e=="function"?this.styleTween(t,W0(t,n,fr(this,"style."+t,e))).each(U0(this._id,t)):this.styleTween(t,X0(t,n,e),r).on("end.style."+t,null)}function Y0(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function K0(t,e,r){var n,i;function o(){var a=e.apply(this,arguments);return a!==i&&(n=(i=a)&&Y0(t,a,r)),n}return o._value=e,o}function Hc(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,K0(t,e,r??""))}function Q0(t){return function(){this.textContent=t}}function Z0(t){return function(){var e=t(this);this.textContent=e??""}}function Fc(t){return this.tween("text",typeof t=="function"?Z0(fr(this,"text",t)):Q0(t==null?"":t+""))}function j0(t){return function(e){this.textContent=t.call(this,e)}}function J0(t){var e,r;function n(){var i=t.apply(this,arguments);return i!==r&&(e=(r=i)&&j0(i)),e}return n._value=t,n}function $c(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,J0(t))}function Gc(){for(var t=this._name,e=this._id,r=Ui(),n=this._groups,i=n.length,o=0;o<i;++o)for(var a=n[o],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var f=it(l,e);fe(l,t,r,u,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new ct(n,this._parents,t,r)}function Vc(){var t,e,r=this,n=r._id,i=r.size();return new Promise(function(o,a){var s={value:a},l={value:function(){--i===0&&o()}};r.each(function(){var u=gt(this,n),f=u.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),u.on=e})})}var ty=0;function ct(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function Ta(t){return Zt().transition(t)}function Ui(){return++ty}var cr=Zt.prototype;ct.prototype=Ta.prototype={constructor:ct,select:Tc,selectAll:Dc,filter:Pc,merge:Ec,selection:Lc,transition:Gc,call:cr.call,nodes:cr.nodes,node:cr.node,size:cr.size,empty:cr.empty,each:cr.each,on:Oc,attr:Ac,attrTween:zc,style:qc,styleTween:Hc,text:Fc,textTween:$c,remove:Ic,tween:Sc,delay:Cc,duration:Rc,ease:Nc,end:Vc};function Yi(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Da={time:null,delay:0,duration:250,ease:Yi};function ey(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))return Da.time=ur(),Da;return r}function Xc(t){var e,r;t instanceof ct?(e=t._id,t=t._name):(e=Ui(),(r=Da).time=ur(),t=t==null?null:t+"");for(var n=this._groups,i=n.length,o=0;o<i;++o)for(var a=n[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&fe(l,t,e,u,a,r||ey(l,e));return new ct(n,this._parents,t,e)}Zt.prototype.interrupt=_c;Zt.prototype.transition=Xc;function Wc(t){return[+t[0],+t[1]]}function ry(t){return[Wc(t[0]),Wc(t[1])]}var $H={name:"x",handles:["w","e"].map(La),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},GH={name:"y",handles:["n","s"].map(La),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},VH={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(La),input:function(t){return t==null?null:ry(t)},output:function(t){return t}};function La(t){return{type:t}}var Uc=Math.PI,ny=Uc/2,iy=Uc*2;var oy=Array.prototype.slice;var Mt="$";function Ki(){}Ki.prototype=Yc.prototype={constructor:Ki,has:function(t){return Mt+t in this},get:function(t){return this[Mt+t]},set:function(t,e){return this[Mt+t]=e,this},remove:function(t){var e=Mt+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===Mt&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===Mt&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===Mt&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===Mt&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===Mt&&++t;return t},empty:function(){for(var t in this)if(t[0]===Mt)return!1;return!0},each:function(t){for(var e in this)e[0]===Mt&&t(this[e],e.slice(1),this)}};function Yc(t,e){var r=new Ki;if(t instanceof Ki)t.each(function(s,l){r.set(l,s)});else if(Array.isArray(t)){var n=-1,i=t.length,o;if(e==null)for(;++n<i;)r.set(n,t[n]);else for(;++n<i;)r.set(e(o=t[n],n,t),o)}else if(t)for(var a in t)r.set(a,t[a]);return r}var Ie=Yc;function Qi(){}var Te=Ie.prototype;Qi.prototype=ay.prototype={constructor:Qi,has:Te.has,add:function(t){return t+="",this[Mt+t]=t,this},remove:Te.remove,clear:Te.clear,values:Te.keys,size:Te.size,empty:Te.empty,each:Te.each};function ay(t,e){var r=new Qi;if(t instanceof Qi)t.each(function(o){r.add(o)});else if(t){var n=-1,i=t.length;if(e==null)for(;++n<i;)r.add(t[n]);else for(;++n<i;)r.add(e(t[n],n,t))}return r}var sy=Array.prototype,Kc=sy.slice;var SF=Math.PI*(3-Math.sqrt(5));function Nt(){return Math.random()}var fy=function t(e){function r(n,i){return n=n==null?0:+n,i=i==null?1:+i,arguments.length===1?(i=n,n=0):i-=n,function(){return e()*i+n}}return r.source=t,r}(Nt);var Ba=function t(e){function r(n,i){var o,a;return n=n==null?0:+n,i=i==null?1:+i,function(){var s;if(o!=null)s=o,o=null;else do o=e()*2-1,s=e()*2-1,a=o*o+s*s;while(!a||a>1);return n+i*s*Math.sqrt(-2*Math.log(a)/a)}}return r.source=t,r}(Nt);var cy=function t(e){function r(){var n=Ba.source(e).apply(this,arguments);return function(){return Math.exp(n())}}return r.source=t,r}(Nt);var qa=function t(e){function r(n){return function(){for(var i=0,o=0;o<n;++o)i+=e();return i}}return r.source=t,r}(Nt);var hy=function t(e){function r(n){var i=qa.source(e)(n);return function(){return i()/n}}return r.source=t,r}(Nt);var py=function t(e){function r(n){return function(){return-Math.log(1-e())/n}}return r.source=t,r}(Nt);var Zc=Array.prototype,Ha=Zc.map,vn=Zc.slice;var vy=1e3,wy=vy*60,by=wy*60,Fa=by*24,P$=Fa*7,E$=Fa*30,O$=Fa*365;function $a(){this._=null}function hr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}$a.prototype={constructor:$a,insert:function(t,e){var r,n,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;r=t}else this._?(t=th(this._),e.P=null,e.N=t,t.P=t.L=e,r=t):(e.P=e.N=null,this._=e,r=null);for(e.L=e.R=null,e.U=r,e.C=!0,t=e;r&&r.C;)n=r.U,r===n.L?(i=n.R,i&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.R&&(kn(this,r),t=r,r=t.U),r.C=!1,n.C=!0,Mn(this,n))):(i=n.L,i&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.L&&(Mn(this,r),t=r,r=t.U),r.C=!1,n.C=!0,kn(this,n))),r=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e=t.U,r,n=t.L,i=t.R,o,a;if(n?i?o=th(i):o=n:o=i,e?e.L===t?e.L=o:e.R=o:this._=o,n&&i?(a=o.C,o.C=t.C,o.L=n,n.U=o,o!==i?(e=o.U,o.U=t.U,t=o.R,e.L=t,o.R=i,i.U=o):(o.U=e,e=o,t=o.R)):(a=t.C,t=o),t&&(t.U=e),!a){if(t&&t.C){t.C=!1;return}do{if(t===this._)break;if(t===e.L){if(r=e.R,r.C&&(r.C=!1,e.C=!0,kn(this,e),r=e.R),r.L&&r.L.C||r.R&&r.R.C){(!r.R||!r.R.C)&&(r.L.C=!1,r.C=!0,Mn(this,r),r=e.R),r.C=e.C,e.C=r.R.C=!1,kn(this,e),t=this._;break}}else if(r=e.L,r.C&&(r.C=!1,e.C=!0,Mn(this,e),r=e.L),r.L&&r.L.C||r.R&&r.R.C){(!r.L||!r.L.C)&&(r.R.C=!1,r.C=!0,kn(this,r),r=e.L),r.C=e.C,e.C=r.L.C=!1,Mn(this,e),t=this._;break}r.C=!0,t=e,e=e.U}while(!t.C);t&&(t.C=!1)}}};function kn(t,e){var r=e,n=e.R,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.R=n.L,r.R&&(r.R.U=r),n.L=r}function Mn(t,e){var r=e,n=e.L,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.L=n.R,r.L&&(r.L.U=r),n.R=r}function th(t){for(;t.L;)t=t.L;return t}var Ga=$a;function pr(t,e,r,n){var i=[null,null],o=at.push(i)-1;return i.left=t,i.right=e,r&&_n(i,t,e,r),n&&_n(i,e,t,n),yt[t.index].halfedges.push(o),yt[e.index].halfedges.push(o),i}function mr(t,e,r){var n=[e,r];return n.left=t,n}function _n(t,e,r,n){!t[0]&&!t[1]?(t[0]=n,t.left=e,t.right=r):t.left===r?t[1]=n:t[0]=n}function Sy(t,e,r,n,i){var o=t[0],a=t[1],s=o[0],l=o[1],u=a[0],f=a[1],c=0,h=1,m=u-s,g=f-l,p;if(p=e-s,!(!m&&p>0)){if(p/=m,m<0){if(p<c)return;p<h&&(h=p)}else if(m>0){if(p>h)return;p>c&&(c=p)}if(p=n-s,!(!m&&p<0)){if(p/=m,m<0){if(p>h)return;p>c&&(c=p)}else if(m>0){if(p<c)return;p<h&&(h=p)}if(p=r-l,!(!g&&p>0)){if(p/=g,g<0){if(p<c)return;p<h&&(h=p)}else if(g>0){if(p>h)return;p>c&&(c=p)}if(p=i-l,!(!g&&p<0)){if(p/=g,g<0){if(p>h)return;p>c&&(c=p)}else if(g>0){if(p<c)return;p<h&&(h=p)}return!(c>0)&&!(h<1)||(c>0&&(t[0]=[s+c*m,l+c*g]),h<1&&(t[1]=[s+h*m,l+h*g])),!0}}}}}function Ay(t,e,r,n,i){var o=t[1];if(o)return!0;var a=t[0],s=t.left,l=t.right,u=s[0],f=s[1],c=l[0],h=l[1],m=(u+c)/2,g=(f+h)/2,p,y;if(h===f){if(m<e||m>=n)return;if(u>c){if(!a)a=[m,r];else if(a[1]>=i)return;o=[m,i]}else{if(!a)a=[m,i];else if(a[1]<r)return;o=[m,r]}}else if(p=(u-c)/(h-f),y=g-p*m,p<-1||p>1)if(u>c){if(!a)a=[(r-y)/p,r];else if(a[1]>=i)return;o=[(i-y)/p,i]}else{if(!a)a=[(i-y)/p,i];else if(a[1]<r)return;o=[(r-y)/p,r]}else if(f<h){if(!a)a=[e,p*e+y];else if(a[0]>=n)return;o=[n,p*n+y]}else{if(!a)a=[n,p*n+y];else if(a[0]<e)return;o=[e,p*e+y]}return t[0]=a,t[1]=o,!0}function eh(t,e,r,n){for(var i=at.length,o;i--;)(!Ay(o=at[i],t,e,r,n)||!Sy(o,t,e,r,n)||!(Math.abs(o[0][0]-o[1][0])>X||Math.abs(o[0][1]-o[1][1])>X))&&delete at[i]}function rh(t){return yt[t.index]={site:t,halfedges:[]}}function zy(t,e){var r=t.site,n=e.left,i=e.right;return r===i&&(i=n,n=r),i?Math.atan2(i[1]-n[1],i[0]-n[0]):(r===n?(n=e[1],i=e[0]):(n=e[0],i=e[1]),Math.atan2(n[0]-i[0],i[1]-n[1]))}function Va(t,e){return e[+(e.left!==t.site)]}function Cy(t,e){return e[+(e.left===t.site)]}function nh(){for(var t=0,e=yt.length,r,n,i,o;t<e;++t)if((r=yt[t])&&(o=(n=r.halfedges).length)){var a=new Array(o),s=new Array(o);for(i=0;i<o;++i)a[i]=i,s[i]=zy(r,at[n[i]]);for(a.sort(function(l,u){return s[u]-s[l]}),i=0;i<o;++i)s[i]=n[a[i]];for(i=0;i<o;++i)n[i]=s[i]}}function ih(t,e,r,n){var i=yt.length,o,a,s,l,u,f,c,h,m,g,p,y,b=!0;for(o=0;o<i;++o)if(a=yt[o]){for(s=a.site,u=a.halfedges,l=u.length;l--;)at[u[l]]||u.splice(l,1);for(l=0,f=u.length;l<f;)g=Cy(a,at[u[l]]),p=g[0],y=g[1],c=Va(a,at[u[++l%f]]),h=c[0],m=c[1],(Math.abs(p-h)>X||Math.abs(y-m)>X)&&(u.splice(l,0,at.push(mr(s,g,Math.abs(p-t)<X&&n-y>X?[t,Math.abs(h-t)<X?m:n]:Math.abs(y-n)<X&&r-p>X?[Math.abs(m-n)<X?h:r,n]:Math.abs(p-r)<X&&y-e>X?[r,Math.abs(h-r)<X?m:e]:Math.abs(y-e)<X&&p-t>X?[Math.abs(m-e)<X?h:t,e]:null))-1),++f);f&&(b=!1)}if(b){var w,v,S,R=1/0;for(o=0,b=null;o<i;++o)(a=yt[o])&&(s=a.site,w=s[0]-t,v=s[1]-e,S=w*w+v*v,S<R&&(R=S,b=a));if(b){var E=[t,e],q=[t,n],G=[r,n],H=[r,e];b.halfedges.push(at.push(mr(s=b.site,E,q))-1,at.push(mr(s,q,G))-1,at.push(mr(s,G,H))-1,at.push(mr(s,H,E))-1)}}for(o=0;o<i;++o)(a=yt[o])&&(a.halfedges.length||delete yt[o])}var oh=[],ji;function Ry(){hr(this),this.x=this.y=this.arc=this.site=this.cy=null}function De(t){var e=t.P,r=t.N;if(!(!e||!r)){var n=e.site,i=t.site,o=r.site;if(n!==o){var a=i[0],s=i[1],l=n[0]-a,u=n[1]-s,f=o[0]-a,c=o[1]-s,h=2*(l*c-u*f);if(!(h>=-ah)){var m=l*l+u*u,g=f*f+c*c,p=(c*m-u*g)/h,y=(l*g-f*m)/h,b=oh.pop()||new Ry;b.arc=t,b.site=i,b.x=p+a,b.y=(b.cy=y+s)+Math.sqrt(p*p+y*y),t.circle=b;for(var w=null,v=dr._;v;)if(b.y<v.y||b.y===v.y&&b.x<=v.x)if(v.L)v=v.L;else{w=v.P;break}else if(v.R)v=v.R;else{w=v;break}dr.insert(w,b),w||(ji=b)}}}}function Le(t){var e=t.circle;e&&(e.P||(ji=e.N),dr.remove(e),oh.push(e),hr(e),t.circle=null)}var lh=[];function Ny(){hr(this),this.edge=this.site=this.circle=null}function sh(t){var e=lh.pop()||new Ny;return e.site=t,e}function Xa(t){Le(t),Be.remove(t),lh.push(t),hr(t)}function uh(t){var e=t.circle,r=e.x,n=e.cy,i=[r,n],o=t.P,a=t.N,s=[t];Xa(t);for(var l=o;l.circle&&Math.abs(r-l.circle.x)<X&&Math.abs(n-l.circle.cy)<X;)o=l.P,s.unshift(l),Xa(l),l=o;s.unshift(l),Le(l);for(var u=a;u.circle&&Math.abs(r-u.circle.x)<X&&Math.abs(n-u.circle.cy)<X;)a=u.N,s.push(u),Xa(u),u=a;s.push(u),Le(u);var f=s.length,c;for(c=1;c<f;++c)u=s[c],l=s[c-1],_n(u.edge,l.site,u.site,i);l=s[0],u=s[f-1],u.edge=pr(l.site,u.site,null,i),De(l),De(u)}function fh(t){for(var e=t[0],r=t[1],n,i,o,a,s=Be._;s;)if(o=ch(s,r)-e,o>X)s=s.L;else if(a=e-Py(s,r),a>X){if(!s.R){n=s;break}s=s.R}else{o>-X?(n=s.P,i=s):a>-X?(n=s,i=s.N):n=i=s;break}rh(t);var l=sh(t);if(Be.insert(n,l),!(!n&&!i)){if(n===i){Le(n),i=sh(n.site),Be.insert(l,i),l.edge=i.edge=pr(n.site,l.site),De(n),De(i);return}if(!i){l.edge=pr(n.site,l.site);return}Le(n),Le(i);var u=n.site,f=u[0],c=u[1],h=t[0]-f,m=t[1]-c,g=i.site,p=g[0]-f,y=g[1]-c,b=2*(h*y-m*p),w=h*h+m*m,v=p*p+y*y,S=[(y*w-m*v)/b+f,(h*v-p*w)/b+c];_n(i.edge,u,g,S),l.edge=pr(u,t,null,S),i.edge=pr(t,g,null,S),De(n),De(i)}}function ch(t,e){var r=t.site,n=r[0],i=r[1],o=i-e;if(!o)return n;var a=t.P;if(!a)return-1/0;r=a.site;var s=r[0],l=r[1],u=l-e;if(!u)return s;var f=s-n,c=1/o-1/u,h=f/u;return c?(-h+Math.sqrt(h*h-2*c*(f*f/(-2*u)-l+u/2+i-o/2)))/c+n:(n+s)/2}function Py(t,e){var r=t.N;if(r)return ch(r,e);var n=t.site;return n[1]===e?n[0]:1/0}var X=1e-6,ah=1e-12,Be,yt,dr,at;function Ey(t,e,r){return(t[0]-r[0])*(e[1]-t[1])-(t[0]-e[0])*(r[1]-t[1])}function Oy(t,e){return e[1]-t[1]||e[0]-t[0]}function Ji(t,e){var r=t.sort(Oy).pop(),n,i,o;for(at=[],yt=new Array(t.length),Be=new Ga,dr=new Ga;;)if(o=ji,r&&(!o||r[1]<o.y||r[1]===o.y&&r[0]<o.x))(r[0]!==n||r[1]!==i)&&(fh(r),n=r[0],i=r[1]),r=t.pop();else if(o)uh(o.arc);else break;if(nh(),e){var a=+e[0][0],s=+e[0][1],l=+e[1][0],u=+e[1][1];eh(a,s,l,u),ih(a,s,l,u)}this.edges=at,this.cells=yt,Be=dr=at=yt=null}Ji.prototype={constructor:Ji,polygons:function(){var t=this.edges;return this.cells.map(function(e){var r=e.halfedges.map(function(n){return Va(e,t[n])});return r.data=e.site.data,r})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(r,n){if(!!(s=(o=r.halfedges).length))for(var i=r.site,o,a=-1,s,l,u=e[o[s-1]],f=u.left===i?u.right:u.left;++a<s;)l=f,u=e[o[a]],f=u.left===i?u.right:u.left,l&&f&&n<l.index&&n<f.index&&Ey(i,l,f)<0&&t.push([i.data,l.data,f.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,r){for(var n=this,i,o=n._found||0,a=n.cells.length,s;!(s=n.cells[o]);)if(++o>=a)return null;var l=t-s.site[0],u=e-s.site[1],f=l*l+u*u;do s=n.cells[i=o],o=null,s.halfedges.forEach(function(c){var h=n.edges[c],m=h.left;if(!((m===s.site||!m)&&!(m=h.right))){var g=t-m[0],p=e-m[1],y=g*g+p*p;y<f&&(f=y,o=m.index)}});while(o!==null);return n._found=i,r==null||f<=r*r?s.site:null}};function qe(t,e,r){this.k=t,this.x=e,this.y=r}qe.prototype={constructor:qe,scale:function(t){return t===1?this:new qe(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new qe(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Wa=new qe(1,0,0);Ua.prototype=qe.prototype;function Ua(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Wa;return t.__zoom}var Xt=["#ad5252","#496279","#afc7d9","#e7a865","#343434","#65bac6"],_={viewMode:"radial",timeoutId:0,relatedEnabled:!0,bacteriaName:void 0,sequenceName:void 0,autocompleter:void 0,selectedIntegration:void 0,charts:{main:void 0,reference:void 0,occurrence:void 0},data:{bacteria:{sequenceNames:void 0,params:void 0},virus:{names:void 0,params:void 0}},currentBacteriaParams(){return this.data.bacteria.params.get(this.sequenceName)},currentVirusParams(){return this.data.virus.params.get(this.selectedIntegration.name)}},L={timeoutTime:300,buttons:{linearOnText:"radial",radialOnText:"linear",relatedOffText:"show related",relatedOnText:"hide related"},plots:{rows:30,xAxisYOffset:-2,xAxisRows:2},colors:{selectedOutline:Xt[5],relatedOutline:"green",outline:Xt[4],virusGene:Xt[0],occurrenceSelected:Xt[5],occurrenceRelated:Xt[3],bacteriaGene:Xt[1],bacteriaGeneGroup:Xt[1],phage:Xt[3],geneAlignmentTop:Xt[1],geneAlignmentBottom:Xt[0]}},hh=t=>{zt({annotations:[t]}).forEach(r=>r.style("stroke-width","2").style("stroke",L.colors.relatedOutline))},ph=t=>{zt({annotations:[t]}).forEach(r=>{r.datum().a==_.selectedIntegration?r.style("stroke",L.colors.selectedOutline):r.style("stroke","none")})};function Ty(t){_.bacteriaName=t.bacteriaName,_.data.bacteria=Dy(t.bacteriaData),_.data.virus=Ly(t.virusData),_.charts.reference=new Ht(qy),_.charts.occurrence=new Ht(Hy),_.charts.main=new Qr(dh);let e=document.getElementById("chart-toggle");e.innerText=`${L.buttons.radialOnText}`,e.addEventListener("click",Vy);let r=document.getElementById("related-toggle");r.innerText=`${L.buttons.relatedOnText}`,r.addEventListener("click",Xy),document.getElementById("reset-zoom").addEventListener("click",()=>{_.charts.main.resetTransform(),_.charts.main.render(yr(Wt({},_.currentBacteriaParams()),{updateDomain:!0}))}),Fy(),$y();let i=_.data.bacteria.sequenceNames[0];gh(i)}function Dy(t){let e=[],r=new Map;for(let n of t){e.push(n.sequenceName);let i=0,o=n.integrations.map(c=>{let h=c.split(",");return{id:`i-${i++}`,start:parseInt(h[0]),end:parseInt(h[1]),queryStart:parseInt(h[2]),queryEnd:parseInt(h[3]),strand:h[4],evalue:parseFloat(h[5]),name:h[6]}});i=0;let a=n.genes.map(c=>{let h=c.split(",");return{id:`g-${i++}`,start:parseInt(h[0]),end:parseInt(h[1]),strand:h[2],score:parseFloat(h[3]),name:h[4],product:h[6]}}),s=se(o),l=se(a),u=s.rowCount,f=0;a.forEach(c=>{let h=l.rowMap.get(c.id)+u;s.rowMap.set(c.id,h),f=Math.max(u,h)}),s.rowCount=f+2,r.set(n.sequenceName,{start:0,end:n.sequenceLength,integrations:o,genes:a,layout:s,integrationRows:u})}return{sequenceNames:e,params:r}}function Ly(t){let e=[],r=new Map;for(let n of t){e.push(n.virusName);let i=0,o=n.genes.map(a=>{let s=a.split(",");return{id:`vg-${i++}`,start:parseInt(s[0]),end:parseInt(s[1]),queryStart:parseInt(s[2]),queryEnd:parseInt(s[3]),queryLength:parseInt(s[4]),strand:s[5],evalue:parseFloat(s[6]),name:s[7],accession:s[8],description:s[9]}});o.sort((a,s)=>a.start-s.start),r.set(n.virusName,{start:0,end:n.counts.length,occurrences:[{id:`${n.virusName}-occ`,start:0,end:n.counts.length,values:n.counts}],genes:o})}return{virusNames:e,params:r}}var mh={resizable:!0,zoomable:!0,divOutline:"1px solid black",updateLayout(t){this.layout=t.layout;let e=this.domain[0],r=this.domain[1],n=r-e,i=[],o=[];if(n>1e6){let a=n/10;for(let s=0;s<10;s++){let l=e+s*a,u=e+(s+1)*a,f=t.genes.filter(h=>h.start>=l&&h.end<=u),c=f.reduce((h,m)=>h+(m.end-m.start),0)/a;o.push({id:`agg-${s}`,start:l,end:u,density:c,count:f.length})}}else i=t.genes.filter(a=>a.start<=r&&a.end>=e);t.filteredGenes=i,t.density=o},updateDomain(t){(t.updateDomain==!0||t.updateDomain==null)&&this.defaultUpdateDomain(t)},postRender(t){this.defaultPostRender(),ir({annotations:t.integrations,text:e=>`${e.a.name}: ${e.a.queryStart.toLocaleString()}..${e.a.queryEnd.toLocaleString()}<br>${e.a.start.toLocaleString()}..${e.a.end.toLocaleString()}<br>Strand: ${e.a.strand}<br>`}),ir({annotations:t.filteredGenes,text:e=>`${e.a.name}<br>${e.a.start.toLocaleString()}..${e.a.end.toLocaleString()}<br>Strand: ${e.a.strand}<br>Product: ${e.a.product}<br>`}),ir({annotations:t.density,text:e=>`Aggregated gene group<br>Density: ${e.a.density.toFixed(2)}<br>Count: ${e.a.count}<br>`}),ki({chart:this,annotations:t.integrations,click(e,r){Ya(r.a)}}),_.charts.reference.highlight({start:this.domain[0],end:this.domain[1],selector:"highlight"})},postZoom(){clearTimeout(_.timeoutId),_.timeoutId=window.setTimeout(()=>{this.updateLayout(this.renderParams),this.draw(this.renderParams),this.postRender(this.renderParams)},L.timeoutTime),_.charts.reference.highlight({start:this.domain[0],end:this.domain[1],selector:"highlight"})}},By=yr(Wt({},mh),{selector:"#vibes-linear",lowerPadSize:5,rowHeight:16,upperPadSize:25,leftPadSize:0,rightPadSize:0,draw(t){this.clear(),this.addAxis(),It({chart:this,annotations:t.integrations,selector:"linear-virus",fillColor:L.colors.phage,strokeWidth:2,strokeColor:e=>e.a==_.selectedIntegration?L.colors.selectedOutline:"none"}),It({chart:this,annotations:t.density,selector:"linear-gene-group",fillColor:L.colors.bacteriaGeneGroup,fillOpacity:e=>e.a.density,row:t.integrationRows}),It({chart:this,annotations:t.filteredGenes,selector:"linear-genes",fillColor:L.colors.bacteriaGene})}}),dh=yr(Wt({},mh),{selector:"#vibes-radial",padSize:50,trackHeightRatio:.15,axisConfig:{tickSizeOuter:10,tickPadding:15},draw(t){this.clear(),this.addAxis(),this.addTrackOutline(),Pe({chart:this,annotations:t.integrations,selector:"radial-virus",fillColor:L.colors.phage,strokeWidth:2,strokeColor:e=>e.a==_.selectedIntegration?L.colors.selectedOutline:"none"}),Pe({chart:this,annotations:t.density,selector:"radial-gene-group",fillColor:L.colors.bacteriaGeneGroup,fillOpacity:e=>e.a.density,row:t.integrationRows}),Pe({chart:this,annotations:t.filteredGenes,selector:"radial-genes",fillColor:L.colors.bacteriaGene})}}),qy={resizable:!0,divOutline:"1px solid black",lowerPadSize:5,rowHeight:16,upperPadSize:25,leftPadSize:0,rightPadSize:0,selector:"#vibes-ref",updateLayout(t){this.layout=t.layout},updateDomain(t){(t.updateDomain==!0||t.updateDomain==null)&&this.defaultUpdateDomain(t)},draw(t){this.addAxis(),It({chart:this,annotations:t.integrations,selector:"reference-bacteria-phages",fillColor:L.colors.phage,strokeColor:L.colors.phage}),It({chart:this,annotations:t.genes,selector:"bacteria-genes",fillColor:L.colors.bacteriaGene})}},Hy={zoomable:!0,resizable:!0,divOutline:"1px solid black",lowerPadSize:5,rowHeight:16,selector:"#vibes-occurrence",upperPadSize:50,leftPadSize:50,updateLayout(t){let e=new Map,r=se(t.genes,100),n=r.rowCount+1,i=L.plots.rows-n;t.genes.forEach(s=>{let l=r.rowCount-r.row({a:s})+1;e.set(s.id,L.plots.rows-l)});let o=se(t.related,10);t.related.forEach(s=>{let l=o.row({a:s})+3;e.set(s.id,i-l)}),this.layout={row(s){return e.get(s.a.id)}},t.shading=[{id:"plot-shading",start:_.selectedIntegration.queryStart,end:_.selectedIntegration.queryEnd,values:t.occurrences[0].values.slice(_.selectedIntegration.queryStart,_.selectedIntegration.queryEnd)}];let a=Math.max(...t.occurrences[0].values);t.yAxis={x:0,y:0,domain:[0,a],rowSpan:i-L.plots.xAxisRows},t.xAxis={x:0,y:this.rowHeight*(i-L.plots.xAxisRows)+L.plots.xAxisYOffset},t.plot={y:0,domain:[a,0],rowSpan:i-L.plots.xAxisRows}},updateRowCount(){this.rowCount=L.plots.rows},updateDimensions(t){let e=500;_.viewMode=="radial"&&(e=_.charts.main.calculatePadHeight()-this.upperPadSize-this.lowerPadSize),this.rowHeight=e/L.plots.rows,this.defaultUpdateDimensions(t)},draw(t){this.clear(),Wr(Wt({chart:this,selector:"x-axis",annotations:t.occurrences,width:this.viewportWidthPx,fixed:!0,axisType:j.Bottom,target:this.overflowViewportSelection},t.xAxis)),ua(Wt({chart:this,annotations:t.occurrences,selector:"y-axis",target:this.overflowViewportSelection,axisType:j.Left},t.yAxis)),fa(Wt({chart:this,annotations:t.occurrences,selector:"plot",strokeColor:L.colors.outline,strokeWidth:1.5},t.plot)),ca(Wt({chart:this,annotations:t.shading,strokeColor:"none",selector:"plot-shading",fillColor:L.colors.occurrenceSelected,fillOpacity:.2},t.plot)),It({chart:this,annotations:t.genes,selector:"virus-genes",strokeColor:L.colors.virusGene,fillColor:L.colors.virusGene,height:this.rowHeight/2}),_.relatedEnabled&&It({chart:this,annotations:t.related,selector:"related",fillColor:L.colors.occurrenceRelated,height:this.rowHeight/2});let e=this.rowHeight/2+3,r=this.viewportWidthPx/2-this.leftPadSize+this.rightPadSize,n=t.xAxis.y+this.rowHeight*1.5,i=-25,o=this.viewportHeightPx/2-this.upperPadSize,a=this.overflowViewportSelection.selectAll("text.x-label").data(["x-label"]),s=a.enter().append("text").attr("class","x-label").text("sequence position (nt)").attr("text-anchor","middle"),l=a.merge(s);l.attr("y",n).attr("x",r).attr("font-size",e),a=this.overflowViewportSelection.selectAll("text.y-label").data(["y-label"]),s=a.enter().append("text").attr("class","y-label").text("position specific integrations (count)").attr("text-anchor","middle"),l=a.merge(s),l.attr("x",i).attr("y",o).attr("transform",`rotate(270 ${i} ${o})`).attr("font-size",e)},postRender(t){ir({annotations:t.genes,text:e=>`${e.a.name}: ${e.a.queryStart.toLocaleString()}..${e.a.queryEnd.toLocaleString()}<br>${e.a.start.toLocaleString()}..${e.a.end.toLocaleString()}<br>Strand: ${e.a.strand}<br>Accession: ${e.a.accession}<br>Description: ${e.a.description}<br>`}),Yr({annotations:t.related,mouseover:(e,r)=>hh(r.a),mouseout:(e,r)=>ph(r.a)}),ki({chart:this,annotations:t.genes,click:(e,r)=>{let n=Ct(`tr#row-${r.a.id}`),i=n.node();if(i==null)throw`Table row element on ${r.a.id} is null or undefined`;i.scrollIntoView(!1),n.style("background-color",L.colors.virusGene),n.interrupt().transition().duration(2e3).style("background-color",null)}})},postResize(){this._renderParams?(this.divHeight=void 0,this.render(this._renderParams)):this.divHeight=_.charts.main.divHeight}};function gh(t){_.sequenceName=t;let e=document.getElementById("seq-label");e.innerHTML=`Sequence: ${t}`;let r=_.data.bacteria.params.get(t);_.charts.reference.render(r),_.charts.main.domain=[r.start,r.end],_.charts.main.render(r),Gy();let n=_.currentBacteriaParams().integrations[0];Ya(n)}function Ya(t){if(_.selectedIntegration!=null&&zt({annotations:[_.selectedIntegration]}).forEach(s=>s.style("stroke","none")),t==null){_.selectedIntegration=void 0,_.charts.occurrence.clear();return}let e=_.currentBacteriaParams();_.selectedIntegration=e.integrations.find(a=>a==t),zt({annotations:[_.selectedIntegration]}).forEach(a=>a.style("stroke",L.colors.selectedOutline));let n=_.selectedIntegration.name,i=document.getElementById("integration-label");i.innerHTML=`Viral integration:${_.selectedIntegration.name}: ${_.selectedIntegration.start.toLocaleString()}..${_.selectedIntegration.end.toLocaleString()} `;let o=e.integrations.filter(a=>a.name==n).map(a=>yr(Wt({},a),{start:a.queryStart,end:a.queryEnd}));params=_.data.virus.params.get(n),params.related=o,_.charts.occurrence.render(params),Wy(params)}function Fy(){let t=bacteriaNames.map(n=>({label:n,group:"Bacteria: type to search"})),e=document.getElementById("bacteria-selection"),r=document.getElementById("bacteria-label");r.innerHTML=`Bacteria: ${_.bacteriaName}`,(0,to.default)({input:e,emptyMsg:"No items found",minLength:0,showOnFocus:!0,disableAutoSelect:!0,onSelect:n=>{e.blur(),window.location.href=`./${n.label}.html`},fetch:(n,i)=>{n=n.toLowerCase();let o=t.filter(a=>a.label.toLowerCase().indexOf(n)!==-1);i(o)}})}function $y(){let t=_.data.bacteria.sequenceNames.map(r=>({label:r,group:"Sequence: type to search"})),e=document.getElementById("seq-selection");(0,to.default)({input:e,emptyMsg:"No items found",minLength:0,showOnFocus:!0,disableAutoSelect:!0,onSelect:r=>{e.blur(),gh(r.label)},fetch:(r,n)=>{r=r.toLowerCase();let i=t.filter(o=>o.label.toLowerCase().indexOf(r)!==-1);n(i)}})}function Gy(){_.autocompleter!=null&&_.autocompleter.destroy();let t=_.currentBacteriaParams().integrations,e=t.map(n=>({label:`${n.name}: ${n.start.toLocaleString()}..${n.end.toLocaleString()}`,ann:n,group:"Integration: type to search"})),r=document.getElementById("integration-selection");_.autocompleter=(0,to.default)({input:r,emptyMsg:"No items found",minLength:0,showOnFocus:!0,disableAutoSelect:!0,onSelect:n=>{r.blur(),Ya(n.ann)},customize:(n,i,o)=>{Ct(o).selectAll("div").filter(":not(.group)").data(t).on("mouseover",hh).on("mouseout",ph)},fetch:(n,i)=>{n=n.toLowerCase();let o=e.filter(a=>a.label.toLowerCase().indexOf(n)!==-1);i(o)}})}function Vy(){let t=_.charts.main.domain,e=_.charts.main.transform.k;_.charts.main.destroy(),_.viewMode=="radial"?(Ct("#chart-toggle").html(`${L.buttons.linearOnText}`),Ct("#vibes-radial").style("flex",0),_.viewMode="linear",_.charts.main=new Ht(By)):(Ct("#chart-toggle").html(`${L.buttons.radialOnText}`),Ct("#vibes-radial").style("flex",1),_.viewMode="radial",_.charts.main=new Qr(dh));let r=_.charts.main,n=_.currentBacteriaParams();r.render(n),r.transform.k=e,r.domain=t,r.applyGlyphModifiers(),r.postZoom(),_.charts.occurrence.resize()}function Xy(){_.relatedEnabled?(Ct("#related-toggle").html(`${L.buttons.relatedOffText}`),_.relatedEnabled=!1):(Ct("#related-toggle").html(`${L.buttons.relatedOnText}`),_.relatedEnabled=!0);let t=_.currentVirusParams();_.charts.occurrence.render(t)}function Wy(t){let e=Ct("div#vibes-bottom");e.selectAll("*").remove(),e.append("h3").html(t.name).style("background","#cccccc").style("margin","0px").style("margin-top","0.5em").style("padding","0.5em");let r=e.append("table").style("border-collapse","collapse").style("border","1px black solid").style("padding","5px 0.5em").style("width","100%").style("font-size","12px"),n=r.append("thead"),i=r.append("tbody"),o=["Gene name","Strand","Start (nt)","End (nt)","E-value","Gene start (aa)","Gene end (aa)","Gene length (aa)","Alignment"];n.append("tr").selectAll("th").data(o).enter().append("th").text(s=>s).style("border","1px solid").style("border-color","#cccccc").style("background","#ddd").style("color","rgba(0, 0, 0, 0.80)").style("padding","1px 0.5em"),n.style("text-align","left");let a=i.selectAll("tr").data(t.genes).enter().append("tr").attr("id",s=>`row-${s.id}`).style("font-size","14px").style("color","#333333");a.each((s,l,u)=>{let f=Ct(u[l]);f.append("td").html(s.name),f.append("td").html(`${s.strand}`),f.append("td").html(`${s.start}`),f.append("td").html(`${s.end}`),f.append("td").html(`${s.evalue.toExponential(2)}`),f.append("td").html(`${s.queryStart}`),f.append("td").html(`${s.queryEnd}`),f.append("td").html(`${s.queryLength}`);let c=f.append("td").append("svg").attr("width","100%").attr("height",20);c.append("rect").attr("width","100%").attr("height","20%").attr("y",5).attr("fill",L.colors.geneAlignmentTop);let h=(s.queryEnd-s.queryStart)/s.queryLength*100,m=s.queryStart/s.queryLength*100;c.append("rect").attr("width",`${h}%`).attr("height","20%").attr("x",`${m}%`).attr("y",10).attr("fill",L.colors.geneAlignmentBottom)}),a.selectAll("td").style("border","1px solid").style("border-color","#cccccc").style("padding","1px 0.5em")}return zh(Uy);})();
